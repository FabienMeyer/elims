{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":""},{"location":"#elims-lab-instrument-management-system","title":"ELIMS - Lab Instrument Management System","text":"<p>Welcome to the ELIMS documentation! ELIMS is a modern laboratory information management system designed to streamline instrument management, data collection, and laboratory workflows.</p>"},{"location":"#quick-start","title":"Quick Start","text":"<p>Get started with ELIMS by exploring the documentation:</p> <ul> <li>API Documentation - Learn about the backend API endpoints and database models</li> <li>Contributing - Guidelines for contributing to the project</li> <li>Code of Conduct - Community standards and expectations</li> </ul>"},{"location":"#features","title":"Features","text":"<ul> <li>Real-time Monitoring: Track laboratory instruments and data in real-time using MQTT</li> <li>Modern Architecture: Built with FastAPI (backend) and React (frontend)</li> <li>Scalable Infrastructure: Docker-based deployment with observability stack (Loki, Grafana, Alloy)</li> <li>Secure: Authentication, secure communication, and proper data handling</li> </ul>"},{"location":"#technology-stack","title":"Technology Stack","text":""},{"location":"#backend","title":"Backend","text":"<ul> <li>FastAPI with SQLModel</li> <li>MariaDB database</li> <li>Redis for caching</li> <li>MQTT (Mosquitto) for messaging</li> </ul>"},{"location":"#frontend","title":"Frontend","text":"<ul> <li>React with TanStack Router and Query</li> <li>Vite for fast development</li> <li>Modern UI components</li> </ul>"},{"location":"#infrastructure","title":"Infrastructure","text":"<ul> <li>Docker Compose orchestration</li> <li>Traefik reverse proxy with automatic SSL</li> <li>LGMA observability stack (Loki, Grafana, Alloy)</li> </ul>"},{"location":"#getting-started","title":"Getting Started","text":"<p>Check out our GitHub repository to get started with ELIMS.</p>"},{"location":"#license","title":"License","text":"<p>ELIMS is licensed under the MIT License.</p>"},{"location":"code_of_conduct/","title":"Code of Conduct","text":"<p>--8\\\u2190 \"CODE_OF_CONDUCT.md\"</p>"},{"location":"contributing/","title":"Contributing","text":"<p>--8\\\u2190 \"CONTRIBUTING.md\"</p>"},{"location":"license/","title":"License","text":""},{"location":"license/#license","title":"License","text":"<p>--8\\\u2190 \"LICENSE\"</p>"},{"location":"privacy/","title":"Privacy","text":""},{"location":"privacy/#privacy","title":"Privacy","text":"<p>Last updated: January 23, 2026</p> <p>This website, Elims Documentation, provides a static site generated using MkDocs and Material for MkDocs. GitHub Pages hosts and publishes the site.</p> <p>This page outlines the minimal data practices of this site and respects your privacy.</p>"},{"location":"privacy/#no-personal-data-collected","title":"No Personal Data Collected","text":"<p>This site doesn't collect, store, or process any personal data.</p> <ul> <li>No contact forms</li> <li>No user accounts</li> <li>No login or registration</li> <li>No tracking cookies or third-party analytics</li> </ul>"},{"location":"privacy/#no-cookies","title":"No Cookies","text":"<p>This site doesn't use any cookies, not for analytics, personalization, or advertising.</p>"},{"location":"privacy/#no-embedded-trackers","title":"No Embedded Trackers","text":"<p>This site doesn't embed or include any scripts from third-party services that track visitors (for example, Google Analytics, Facebook Pixel, etc.).</p> <p>All JavaScript used on this site stays self-hosted and improves the documentation experience (for example, rendering diagrams and charts via <code>Mermaid</code> and <code>Plotly</code>).</p>"},{"location":"privacy/#hosting-and-logs","title":"Hosting and Logs","text":"<p>GitHub Pages hosts this site, a static site hosting service provided by GitHub. GitHub may collect standard web server logs (for example, IP addresses, browser type, referring pages) for operational and security purposes.</p> <p>Please consult GitHub\u2019s Privacy Statement for more details on how GitHub handles such data.</p>"},{"location":"privacy/#external-links","title":"External Links","text":"<p>This documentation may include links to third-party websites (for example, GitHub repositories, hardware data sheets). The site owners bear no responsibility for the privacy policies or practices of those external sites.</p>"},{"location":"privacy/#contact","title":"Contact","text":"<p>If you have any questions or concerns about this privacy policy or the site\u2019s behavior, you may reach out via GitHub.</p>"},{"location":"privacy/#changes-to-this-policy","title":"Changes to This Policy","text":"<p>This privacy policy may need updates to reflect changes in site features or hosting. The site owners will document any updates on this page, with the \"last updated\" date at the top revised accordingly.</p>"},{"location":"release-notes/","title":"Release Notes","text":""},{"location":"release-notes/#release-notes","title":"Release Notes","text":""},{"location":"release-notes/#latest-changes","title":"Latest Changes","text":""},{"location":"release-notes/#features","title":"Features","text":"<ul> <li>Initial release of ELIMS - Electronic Laboratory Instrument Management System</li> </ul>"},{"location":"release-notes/#infrastructure","title":"Infrastructure","text":"<ul> <li>Docker Compose setup with MariaDB, Redis, Mosquitto MQTT, and Grafana stack</li> <li>Observability with Loki, Alloy, and Grafana for logging and monitoring</li> <li>Traefik reverse proxy for HTTPS and routing</li> </ul>"},{"location":"release-notes/#backend","title":"Backend","text":"<ul> <li>FastAPI backend with SQLModel ORM</li> <li>Python 3.13 with uv package manager</li> <li>Configured with mypy, ruff, and pytest</li> </ul>"},{"location":"release-notes/#frontend","title":"Frontend","text":"<ul> <li>React 19 with TypeScript and Vite</li> <li>Tailwind CSS for styling</li> <li>TanStack Query and Router for state and routing</li> <li>Playwright for E2E testing</li> </ul>"},{"location":"release-notes/#001","title":"0.0.1","text":"<p>Initial release</p>"},{"location":"backend/","title":"Overview","text":""},{"location":"backend/#backend-documentation","title":"Backend Documentation","text":""},{"location":"backend/#overview","title":"Overview","text":"<p>The ELIMS backend is a FastAPI-based REST API that provides the core functionality for the laboratory instrument management system. It handles data persistence, business logic, and provides a modern, async API for the frontend application.</p>"},{"location":"backend/#technology-stack","title":"Technology Stack","text":"<ul> <li>Framework: FastAPI 0.128+</li> <li>Python: 3.13+</li> <li>ORM: SQLModel (combines SQLAlchemy + Pydantic)</li> <li>Database: MariaDB 11</li> <li>Cache: Redis 7</li> <li>Message Broker: Mosquitto MQTT</li> <li>Server: Uvicorn with Gunicorn</li> <li>Migrations: Alembic</li> <li>Logging: Loguru</li> </ul>"},{"location":"backend/#project-structure","title":"Project Structure","text":"<pre><code>backend/\n\u251c\u2500\u2500 app/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u251c\u2500\u2500 main.py              # FastAPI application entry point\n\u2502   \u251c\u2500\u2500 config.py            # Configuration management\n\u2502   \u251c\u2500\u2500 db.py                # Database connection and session\n\u2502   \u251c\u2500\u2500 logger.py            # Logging configuration\n\u2502   \u251c\u2500\u2500 routers.py           # Router registration\n\u2502   \u251c\u2500\u2500 py.typed             # Type checking marker\n\u2502   \u251c\u2500\u2500 alembic/             # Database migrations\n\u2502   \u2502   \u251c\u2500\u2500 env.py\n\u2502   \u2502   \u251c\u2500\u2500 script.py.mako\n\u2502   \u2502   \u2514\u2500\u2500 versions/        # Migration files\n\u2502   \u251c\u2500\u2500 api/                 # API endpoints\n\u2502   \u2502   \u2514\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 core/                # Core business logic\n\u2502       \u2514\u2500\u2500 __init__.py\n\u251c\u2500\u2500 tests/                   # Test suite\n\u2502   \u251c\u2500\u2500 conftest.py          # Pytest configuration\n\u2502   \u251c\u2500\u2500 api/                 # API tests\n\u2502   \u2514\u2500\u2500 core/                # Core logic tests\n\u251c\u2500\u2500 Dockerfile               # Multi-stage production build\n\u251c\u2500\u2500 pyproject.toml           # Project dependencies and config\n\u251c\u2500\u2500 alembic.ini              # Alembic configuration\n\u2514\u2500\u2500 README.md\n</code></pre>"},{"location":"backend/#architecture","title":"Architecture","text":""},{"location":"backend/#application-layers","title":"Application Layers","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502         API Layer (FastAPI)         \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502   Routers &amp; Endpoints       \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                 \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502        Business Logic Layer         \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502   Services &amp; Core Logic     \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                 \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502         Data Access Layer           \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u2502\n\u2502  \u2502   SQLModel Models &amp; ORM     \u2502   \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                 \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502            Database                 \u2502\n\u2502         MariaDB + Redis             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"backend/#key-components","title":"Key Components","text":""},{"location":"backend/#1-main-application-mainpy","title":"1. Main Application (<code>main.py</code>)","text":"<p>Entry point for the FastAPI application:</p> <pre><code>from fastapi import FastAPI\nfrom app.config import settings\nfrom app.logger import logger\nfrom app.routers import setup_routers\n\napp = FastAPI(\n    title=\"ELIMS API\",\n    description=\"Electronic Laboratory Instrument Management System\",\n    version=\"0.0.1\",\n)\n\n# Setup routers\nsetup_routers(app)\n\n@app.on_event(\"startup\")\nasync def startup():\n    logger.info(\"Starting ELIMS Backend\")\n    # Initialize database, cache, etc.\n\n@app.on_event(\"shutdown\")\nasync def shutdown():\n    logger.info(\"Shutting down ELIMS Backend\")\n    # Cleanup resources\n</code></pre>"},{"location":"backend/#2-configuration-configpy","title":"2. Configuration (<code>config.py</code>)","text":"<p>Manages application configuration using Pydantic Settings:</p> <pre><code>from pydantic_settings import BaseSettings\n\nclass Settings(BaseSettings):\n    # Database\n    MARIADB_HOST: str\n    MARIADB_PORT: int = 3306\n    MARIADB_USER: str\n    MARIADB_PASSWORD: str\n    MARIADB_DATABASE: str\n\n    # Redis\n    REDIS_HOST: str\n    REDIS_PORT: int = 6379\n    REDIS_PASSWORD: str\n\n    # MQTT\n    MQTT_HOST: str\n    MQTT_PORT: int = 8883\n    MQTT_USERNAME: str\n    MQTT_PASSWORD: str\n\n    # Backend\n    BACKEND_SECRET_KEY: str\n    BACKEND_ALGORITHM: str = \"HS256\"\n    BACKEND_ACCESS_TOKEN_EXPIRE_MINUTES: int = 60\n    BACKEND_CORS_ORIGINS: str\n\n    # Environment\n    ENVIRONMENT: str = \"development\"\n\n    class Config:\n        env_file = \".env\"\n\nsettings = Settings()\n</code></pre>"},{"location":"backend/#3-database-dbpy","title":"3. Database (<code>db.py</code>)","text":"<p>Database connection and session management:</p> <pre><code>from sqlmodel import Session, create_engine\nfrom app.config import settings\n\n# Database URL\nDATABASE_URL = f\"mysql+pymysql://{settings.MARIADB_USER}:{settings.MARIADB_PASSWORD}@{settings.MARIADB_HOST}:{settings.MARIADB_PORT}/{settings.MARIADB_DATABASE}\"\n\n# Create engine\nengine = create_engine(\n    DATABASE_URL,\n    echo=settings.ENVIRONMENT == \"development\",\n    pool_pre_ping=True,\n    pool_recycle=3600,\n)\n\ndef get_session():\n    with Session(engine) as session:\n        yield session\n</code></pre>"},{"location":"backend/#4-logging-loggerpy","title":"4. Logging (<code>logger.py</code>)","text":"<p>Centralized logging using Loguru:</p> <pre><code>from loguru import logger\nimport sys\n\n# Configure logger\nlogger.remove()  # Remove default handler\nlogger.add(\n    sys.stdout,\n    format=\"&lt;green&gt;{time:YYYY-MM-DD HH:mm:ss}&lt;/green&gt; | &lt;level&gt;{level: &lt;8}&lt;/level&gt; | &lt;cyan&gt;{name}&lt;/cyan&gt;:&lt;cyan&gt;{function}&lt;/cyan&gt;:&lt;cyan&gt;{line}&lt;/cyan&gt; - &lt;level&gt;{message}&lt;/level&gt;\",\n    level=\"INFO\",\n)\n\n# Add file handler for production\nif settings.ENVIRONMENT == \"production\":\n    logger.add(\n        \"logs/elims.log\",\n        rotation=\"500 MB\",\n        retention=\"10 days\",\n        compression=\"zip\",\n    )\n</code></pre>"},{"location":"backend/#5-routers-routerspy","title":"5. Routers (<code>routers.py</code>)","text":"<p>Router registration and organization:</p> <pre><code>from fastapi import FastAPI\nfrom app.api import instruments, locations, users\n\ndef setup_routers(app: FastAPI):\n    \"\"\"Register all API routers\"\"\"\n    app.include_router(\n        instruments.router,\n        prefix=\"/api/instruments\",\n        tags=[\"instruments\"],\n    )\n    app.include_router(\n        locations.router,\n        prefix=\"/api/locations\",\n        tags=[\"locations\"],\n    )\n    app.include_router(\n        users.router,\n        prefix=\"/api/users\",\n        tags=[\"users\"],\n    )\n</code></pre>"},{"location":"backend/#database-models","title":"Database Models","text":""},{"location":"backend/#example-sqlmodel-models","title":"Example: SQLModel Models","text":"<pre><code>from sqlmodel import Field, SQLModel\nfrom datetime import datetime\n\nclass InstrumentBase(SQLModel):\n    name: str\n    model: str\n    serial_number: str\n    location_id: int\n    status: str = \"active\"\n\nclass Instrument(InstrumentBase, table=True):\n    id: int | None = Field(default=None, primary_key=True)\n    created_at: datetime = Field(default_factory=datetime.utcnow)\n    updated_at: datetime = Field(default_factory=datetime.utcnow)\n\nclass InstrumentCreate(InstrumentBase):\n    pass\n\nclass InstrumentRead(InstrumentBase):\n    id: int\n    created_at: datetime\n    updated_at: datetime\n\nclass InstrumentUpdate(SQLModel):\n    name: str | None = None\n    model: str | None = None\n    status: str | None = None\n</code></pre>"},{"location":"backend/#api-endpoints","title":"API Endpoints","text":""},{"location":"backend/#standard-crud-pattern","title":"Standard CRUD Pattern","text":"<pre><code>from fastapi import APIRouter, Depends, HTTPException\nfrom sqlmodel import Session, select\nfrom app.db import get_session\nfrom app.models import Instrument, InstrumentCreate, InstrumentRead, InstrumentUpdate\n\nrouter = APIRouter()\n\n@router.get(\"/\", response_model=list[InstrumentRead])\nasync def list_instruments(\n    session: Session = Depends(get_session),\n    skip: int = 0,\n    limit: int = 100,\n):\n    \"\"\"List all instruments\"\"\"\n    statement = select(Instrument).offset(skip).limit(limit)\n    instruments = session.exec(statement).all()\n    return instruments\n\n@router.get(\"/{instrument_id}\", response_model=InstrumentRead)\nasync def get_instrument(\n    instrument_id: int,\n    session: Session = Depends(get_session),\n):\n    \"\"\"Get instrument by ID\"\"\"\n    instrument = session.get(Instrument, instrument_id)\n    if not instrument:\n        raise HTTPException(status_code=404, detail=\"Instrument not found\")\n    return instrument\n\n@router.post(\"/\", response_model=InstrumentRead)\nasync def create_instrument(\n    instrument: InstrumentCreate,\n    session: Session = Depends(get_session),\n):\n    \"\"\"Create new instrument\"\"\"\n    db_instrument = Instrument.model_validate(instrument)\n    session.add(db_instrument)\n    session.commit()\n    session.refresh(db_instrument)\n    return db_instrument\n\n@router.patch(\"/{instrument_id}\", response_model=InstrumentRead)\nasync def update_instrument(\n    instrument_id: int,\n    instrument: InstrumentUpdate,\n    session: Session = Depends(get_session),\n):\n    \"\"\"Update instrument\"\"\"\n    db_instrument = session.get(Instrument, instrument_id)\n    if not db_instrument:\n        raise HTTPException(status_code=404, detail=\"Instrument not found\")\n\n    update_data = instrument.model_dump(exclude_unset=True)\n    for key, value in update_data.items():\n        setattr(db_instrument, key, value)\n\n    session.add(db_instrument)\n    session.commit()\n    session.refresh(db_instrument)\n    return db_instrument\n\n@router.delete(\"/{instrument_id}\")\nasync def delete_instrument(\n    instrument_id: int,\n    session: Session = Depends(get_session),\n):\n    \"\"\"Delete instrument\"\"\"\n    instrument = session.get(Instrument, instrument_id)\n    if not instrument:\n        raise HTTPException(status_code=404, detail=\"Instrument not found\")\n\n    session.delete(instrument)\n    session.commit()\n    return {\"ok\": True}\n</code></pre>"},{"location":"backend/#database-migrations","title":"Database Migrations","text":""},{"location":"backend/#using-alembic","title":"Using Alembic","text":""},{"location":"backend/#create-migration","title":"Create Migration","text":"<pre><code># Auto-generate migration from models\nuv run alembic revision --autogenerate -m \"Add instruments table\"\n\n# Create empty migration\nuv run alembic revision -m \"Custom migration\"\n</code></pre>"},{"location":"backend/#apply-migrations","title":"Apply Migrations","text":"<pre><code># Upgrade to latest\nuv run alembic upgrade head\n\n# Upgrade one version\nuv run alembic upgrade +1\n\n# Downgrade one version\nuv run alembic downgrade -1\n\n# Show current version\nuv run alembic current\n\n# Show history\nuv run alembic history\n</code></pre>"},{"location":"backend/#migration-example","title":"Migration Example","text":"<pre><code>\"\"\"Add instruments table\n\nRevision ID: 001\nRevises:\nCreate Date: 2026-01-23\n\"\"\"\nfrom alembic import op\nimport sqlalchemy as sa\nimport sqlmodel\n\n# revision identifiers\nrevision = '001'\ndown_revision = None\nbranch_labels = None\ndepends_on = None\n\ndef upgrade():\n    op.create_table(\n        'instrument',\n        sa.Column('id', sa.Integer(), nullable=False),\n        sa.Column('name', sa.String(length=255), nullable=False),\n        sa.Column('model', sa.String(length=255), nullable=False),\n        sa.Column('serial_number', sa.String(length=255), nullable=False),\n        sa.Column('location_id', sa.Integer(), nullable=False),\n        sa.Column('status', sa.String(length=50), nullable=False),\n        sa.Column('created_at', sa.DateTime(), nullable=False),\n        sa.Column('updated_at', sa.DateTime(), nullable=False),\n        sa.PrimaryKeyConstraint('id')\n    )\n\ndef downgrade():\n    op.drop_table('instrument')\n</code></pre>"},{"location":"backend/#testing","title":"Testing","text":""},{"location":"backend/#test-structure","title":"Test Structure","text":"<pre><code># tests/conftest.py\nimport pytest\nfrom sqlmodel import Session, create_engine, SQLModel\nfrom app.main import app\nfrom app.db import get_session\n\n@pytest.fixture\ndef session():\n    engine = create_engine(\"sqlite:///:memory:\")\n    SQLModel.metadata.create_all(engine)\n    with Session(engine) as session:\n        yield session\n\n@pytest.fixture\ndef client(session):\n    def get_session_override():\n        return session\n\n    app.dependency_overrides[get_session] = get_session_override\n    from fastapi.testclient import TestClient\n    with TestClient(app) as client:\n        yield client\n    app.dependency_overrides.clear()\n</code></pre>"},{"location":"backend/#example-tests","title":"Example Tests","text":"<pre><code># tests/api/test_instruments.py\ndef test_create_instrument(client):\n    response = client.post(\n        \"/api/instruments/\",\n        json={\n            \"name\": \"Test Instrument\",\n            \"model\": \"TEST-100\",\n            \"serial_number\": \"SN12345\",\n            \"location_id\": 1,\n        }\n    )\n    assert response.status_code == 200\n    data = response.json()\n    assert data[\"name\"] == \"Test Instrument\"\n    assert \"id\" in data\n\ndef test_list_instruments(client):\n    response = client.get(\"/api/instruments/\")\n    assert response.status_code == 200\n    assert isinstance(response.json(), list)\n\ndef test_get_instrument_not_found(client):\n    response = client.get(\"/api/instruments/999\")\n    assert response.status_code == 404\n</code></pre>"},{"location":"backend/#running-tests","title":"Running Tests","text":"<pre><code># Run all tests\nuv run pytest\n\n# Run with coverage\nuv run pytest --cov=app --cov-report=html\n\n# Run specific test\nuv run pytest tests/api/test_instruments.py\n\n# Run with verbose output\nuv run pytest -v\n\n# Run with print statements\nuv run pytest -s\n</code></pre>"},{"location":"backend/#development","title":"Development","text":""},{"location":"backend/#setup","title":"Setup","text":"<pre><code># Clone repository\ngit clone https://github.com/FabienMeyer/elims.git\ncd elims/backend\n\n# Install dependencies\nuv sync\n\n# Copy environment file\ncp ../.env.example ../.env\n# Edit .env with your configuration\n\n# Run migrations\nuv run alembic upgrade head\n\n# Run development server\nuv run fastapi dev app/main.py\n</code></pre>"},{"location":"backend/#code-quality","title":"Code Quality","text":"<pre><code># Type checking\nuv run mypy app\n\n# Linting\nuv run ruff check app\n\n# Auto-fix linting issues\nuv run ruff check app --fix\n\n# Format code\nuv run ruff format app\n\n# Check formatting\nuv run ruff format app --check\n</code></pre>"},{"location":"backend/#development-server","title":"Development Server","text":"<pre><code># FastAPI development server (auto-reload)\nuv run fastapi dev app/main.py\n\n# Uvicorn directly\nuv run uvicorn app.main:app --reload --host 0.0.0.0 --port 8000\n\n# With specific log level\nuv run fastapi dev app/main.py --log-level debug\n</code></pre>"},{"location":"backend/#api-documentation","title":"API Documentation","text":"<p>FastAPI automatically generates API documentation:</p> <ul> <li>Swagger UI: http://localhost:8000/docs</li> <li>ReDoc: http://localhost:8000/redoc</li> <li>OpenAPI JSON: http://localhost:8000/openapi.json</li> </ul>"},{"location":"backend/#production-deployment","title":"Production Deployment","text":""},{"location":"backend/#docker-build","title":"Docker Build","text":"<p>The Dockerfile uses a multi-stage build:</p> <ol> <li>Base: Python 3.13 with uv</li> <li>Dependencies: Install dependencies</li> <li>Production: Copy app and run with Gunicorn</li> </ol> <pre><code>FROM python:3.13-slim as base\n\n# Install uv\nCOPY --from=ghcr.io/astral-sh/uv:latest /uv /usr/local/bin/uv\n\nWORKDIR /app\n\n# Copy dependency files\nCOPY pyproject.toml uv.lock ./\n\n# Install dependencies\nRUN uv sync --frozen --no-dev\n\n# Copy application\nCOPY . .\n\n# Run with Gunicorn\nCMD [\"uv\", \"run\", \"gunicorn\", \"app.main:app\", \"-k\", \"uvicorn.workers.UvicornWorker\", \"--bind\", \"0.0.0.0:8000\"]\n</code></pre>"},{"location":"backend/#environment-variables","title":"Environment Variables","text":"<p>Required in production:</p> <pre><code># Database\nMARIADB_HOST=mariadb\nMARIADB_PORT=3306\nMARIADB_USER=elims\nMARIADB_PASSWORD=secure_password\nMARIADB_DATABASE=elims\n\n# Redis\nREDIS_HOST=redis\nREDIS_PORT=6379\nREDIS_PASSWORD=secure_password\n\n# MQTT\nMQTT_HOST=mosquitto\nMQTT_PORT=8883\nMQTT_USERNAME=elims\nMQTT_PASSWORD=secure_password\n\n# Backend\nBACKEND_SECRET_KEY=generate_with_openssl_rand_hex_32\nBACKEND_ALGORITHM=HS256\nBACKEND_ACCESS_TOKEN_EXPIRE_MINUTES=60\nBACKEND_CORS_ORIGINS=https://example.com\nENVIRONMENT=production\n</code></pre>"},{"location":"backend/#performance-tuning","title":"Performance Tuning","text":"<pre><code># Gunicorn with multiple workers\ngunicorn app.main:app \\\n  -k uvicorn.workers.UvicornWorker \\\n  --workers 4 \\\n  --worker-class uvicorn.workers.UvicornWorker \\\n  --bind 0.0.0.0:8000 \\\n  --access-logfile - \\\n  --error-logfile - \\\n  --log-level info\n</code></pre>"},{"location":"backend/#best-practices","title":"Best Practices","text":""},{"location":"backend/#api-design","title":"API Design","text":"<ol> <li>Use Pydantic Models: For request/response validation</li> <li>Depend on get_session: For database access</li> <li>Use HTTP Status Codes: Correctly (200, 201, 404, 422, etc.)</li> <li>Add Response Models: For type safety and docs</li> <li>Include Docstrings: For API documentation</li> </ol>"},{"location":"backend/#database","title":"Database","text":"<ol> <li>Use Transactions: For data consistency</li> <li>Add Indexes: For frequently queried fields</li> <li>Implement Soft Deletes: For audit trails</li> <li>Use Connection Pooling: For performance</li> <li>Regular Backups: Automated and tested</li> </ol>"},{"location":"backend/#security","title":"Security","text":"<ol> <li>Input Validation: Pydantic models + custom validators</li> <li>SQL Injection Protection: Use ORM (SQLModel)</li> <li>Authentication: JWT tokens</li> <li>Authorization: Role-based access control</li> <li>HTTPS Only: In production</li> <li>CORS Configuration: Whitelist specific origins</li> </ol>"},{"location":"backend/#error-handling","title":"Error Handling","text":"<pre><code>from fastapi import HTTPException\n\n# Client errors (4xx)\nraise HTTPException(status_code=400, detail=\"Bad request\")\nraise HTTPException(status_code=404, detail=\"Not found\")\nraise HTTPException(status_code=422, detail=\"Validation error\")\n\n# Server errors (5xx)\nraise HTTPException(status_code=500, detail=\"Internal server error\")\n</code></pre>"},{"location":"backend/#troubleshooting","title":"Troubleshooting","text":""},{"location":"backend/#common-issues","title":"Common Issues","text":"<ol> <li> <p>Database Connection Errors</p> </li> <li> <p>Check environment variables</p> </li> <li>Verify database is running</li> <li> <p>Test connection manually</p> </li> <li> <p>Import Errors</p> </li> <li> <p>Ensure dependencies are installed</p> </li> <li>Check Python path</li> <li> <p>Verify module structure</p> </li> <li> <p>Migration Issues</p> </li> <li> <p>Check database permissions</p> </li> <li>Verify Alembic configuration</li> <li>Review migration history</li> </ol>"},{"location":"backend/#debugging","title":"Debugging","text":"<pre><code># Add breakpoint\nimport pdb; pdb.set_trace()\n\n# Enhanced logging\nlogger.debug(f\"Processing instrument: {instrument}\")\nlogger.info(\"Request completed\")\nlogger.warning(\"Deprecated endpoint used\")\nlogger.error(\"Database error\", exc_info=True)\n</code></pre>"},{"location":"backend/#related-documentation","title":"Related Documentation","text":"<ul> <li>Frontend Documentation</li> <li>Workflows Documentation</li> <li>Package Documentation</li> </ul>"},{"location":"frontend/","title":"Overview","text":""},{"location":"frontend/#frontend-documentation","title":"Frontend Documentation","text":""},{"location":"frontend/#overview","title":"Overview","text":"<p>The ELIMS frontend is a modern React application built with TypeScript, providing a rich user interface for laboratory instrument management. It features real-time data updates, responsive design, and comprehensive data visualization.</p>"},{"location":"frontend/#technology-stack","title":"Technology Stack","text":"<ul> <li>Framework: React 19.1+</li> <li>Language: TypeScript 5+</li> <li>Build Tool: Vite 6+</li> <li>Package Manager: Bun</li> <li>Routing: TanStack Router 1.142+</li> <li>State Management: TanStack Query 5.90+</li> <li>UI Components: Radix UI</li> <li>Styling: Tailwind CSS 4+</li> <li>Forms: React Hook Form + Zod</li> <li>Icons: Lucide React + React Icons</li> <li>HTTP Client: Axios 1.13+</li> <li>Testing: Playwright 1.57+</li> <li>Linting: Biome 2.3+</li> </ul>"},{"location":"frontend/#project-structure","title":"Project Structure","text":"<pre><code>frontend/\n\u251c\u2500\u2500 src/\n\u2502   \u251c\u2500\u2500 main.tsx              # Application entry point\n\u2502   \u251c\u2500\u2500 index.css             # Global styles\n\u2502   \u251c\u2500\u2500 vite-env.d.ts         # Vite type definitions\n\u2502   \u251c\u2500\u2500 utils.ts              # Utility functions\n\u2502   \u251c\u2500\u2500 routeTree.gen.ts      # Auto-generated router config\n\u2502   \u251c\u2500\u2500 client/               # API client (auto-generated)\n\u2502   \u2502   \u251c\u2500\u2500 index.ts\n\u2502   \u2502   \u251c\u2500\u2500 sdk.gen.ts\n\u2502   \u2502   \u251c\u2500\u2500 types.gen.ts\n\u2502   \u2502   \u2514\u2500\u2500 core/\n\u2502   \u251c\u2500\u2500 components/           # React components\n\u2502   \u2502   \u251c\u2500\u2500 theme-provider.tsx\n\u2502   \u2502   \u251c\u2500\u2500 Common/           # Common components\n\u2502   \u2502   \u2514\u2500\u2500 ui/               # UI components (shadcn)\n\u2502   \u251c\u2500\u2500 hooks/                # Custom React hooks\n\u2502   \u2502   \u2514\u2500\u2500 useMobile.ts\n\u2502   \u251c\u2500\u2500 lib/                  # Libraries and utilities\n\u2502   \u2502   \u2514\u2500\u2500 utils.ts\n\u2502   \u2514\u2500\u2500 routes/               # Route components\n\u2502       \u251c\u2500\u2500 __root.tsx        # Root layout\n\u2502       \u251c\u2500\u2500 _layout.tsx       # App layout\n\u2502       \u2514\u2500\u2500 _layout/          # Nested routes\n\u251c\u2500\u2500 public/                   # Static assets\n\u2502   \u2514\u2500\u2500 assets/\n\u2502       \u2514\u2500\u2500 images/\n\u251c\u2500\u2500 tests/                    # E2E tests\n\u2502   \u251c\u2500\u2500 config.ts\n\u2502   \u251c\u2500\u2500 home.spec.ts\n\u2502   \u2514\u2500\u2500 utils/\n\u251c\u2500\u2500 components.json           # shadcn/ui config\n\u251c\u2500\u2500 Dockerfile                # Production Docker image\n\u251c\u2500\u2500 Dockerfile.playwright     # Playwright test image\n\u251c\u2500\u2500 nginx.conf                # Nginx configuration\n\u251c\u2500\u2500 openapi-ts.config.ts      # API client generation config\n\u251c\u2500\u2500 playwright.config.ts      # Playwright configuration\n\u251c\u2500\u2500 package.json              # Dependencies and scripts\n\u251c\u2500\u2500 tsconfig.json             # TypeScript config\n\u251c\u2500\u2500 tsconfig.build.json       # Build TypeScript config\n\u251c\u2500\u2500 tsconfig.node.json        # Node TypeScript config\n\u251c\u2500\u2500 vite.config.ts            # Vite configuration\n\u2514\u2500\u2500 biome.json               # Biome linting config\n</code></pre>"},{"location":"frontend/#architecture","title":"Architecture","text":""},{"location":"frontend/#component-hierarchy","title":"Component Hierarchy","text":"<pre><code>App (main.tsx)\n  \u251c\u2500\u2500 Router\n  \u2502   \u251c\u2500\u2500 Root Layout (__root.tsx)\n  \u2502   \u2502   \u251c\u2500\u2500 Theme Provider\n  \u2502   \u2502   \u251c\u2500\u2500 Query Client Provider\n  \u2502   \u2502   \u2514\u2500\u2500 Error Boundary\n  \u2502   \u2514\u2500\u2500 Routes\n  \u2502       \u251c\u2500\u2500 Layout (_layout.tsx)\n  \u2502       \u2502   \u251c\u2500\u2500 Header\n  \u2502       \u2502   \u251c\u2500\u2500 Sidebar\n  \u2502       \u2502   \u2514\u2500\u2500 Main Content\n  \u2502       \u2514\u2500\u2500 Pages\n  \u2502           \u251c\u2500\u2500 Dashboard\n  \u2502           \u251c\u2500\u2500 Instruments\n  \u2502           \u251c\u2500\u2500 Locations\n  \u2502           \u2514\u2500\u2500 Settings\n</code></pre>"},{"location":"frontend/#data-flow","title":"Data Flow","text":"<pre><code>User Interaction\n      \u2193\nReact Component\n      \u2193\nTanStack Query Hook\n      \u2193\nAPI Client (Axios)\n      \u2193\nBackend API\n      \u2193\nResponse Processing\n      \u2193\nState Update (TanStack Query Cache)\n      \u2193\nReact Re-render\n</code></pre>"},{"location":"frontend/#key-features","title":"Key Features","text":""},{"location":"frontend/#1-routing-tanstack-router","title":"1. Routing (TanStack Router)","text":"<p>File-based routing with type-safe navigation:</p> <pre><code>// routes/__root.tsx\nimport { createRootRoute, Outlet } from '@tanstack/react-router'\nimport { TanStackRouterDevtools } from '@tanstack/router-devtools'\n\nexport const Route = createRootRoute({\n  component: () =&gt; (\n    &lt;&gt;\n      &lt;Outlet /&gt;\n      {import.meta.env.DEV &amp;&amp; &lt;TanStackRouterDevtools /&gt;}\n    &lt;/&gt;\n  ),\n})\n</code></pre> <pre><code>// routes/_layout/index.tsx\nimport { createFileRoute } from '@tanstack/react-router'\n\nexport const Route = createFileRoute('/_layout/')({\n  component: Dashboard,\n})\n\nfunction Dashboard() {\n  return (\n    &lt;div&gt;\n      &lt;h1&gt;Dashboard&lt;/h1&gt;\n      {/* Dashboard content */}\n    &lt;/div&gt;\n  )\n}\n</code></pre>"},{"location":"frontend/#2-data-fetching-tanstack-query","title":"2. Data Fetching (TanStack Query)","text":"<p>Declarative data fetching with caching:</p> <pre><code>import { useQuery, useMutation, useQueryClient } from '@tanstack/react-query'\nimport { InstrumentsService } from '@/client'\n\n// Fetch instruments\nfunction useInstruments() {\n  return useQuery({\n    queryKey: ['instruments'],\n    queryFn: () =&gt; InstrumentsService.listInstruments(),\n  })\n}\n\n// Create instrument\nfunction useCreateInstrument() {\n  const queryClient = useQueryClient()\n\n  return useMutation({\n    mutationFn: InstrumentsService.createInstrument,\n    onSuccess: () =&gt; {\n      // Invalidate and refetch\n      queryClient.invalidateQueries({ queryKey: ['instruments'] })\n    },\n  })\n}\n\n// Usage in component\nfunction InstrumentsList() {\n  const { data, isLoading, error } = useInstruments()\n  const createMutation = useCreateInstrument()\n\n  if (isLoading) return &lt;div&gt;Loading...&lt;/div&gt;\n  if (error) return &lt;div&gt;Error: {error.message}&lt;/div&gt;\n\n  return (\n    &lt;div&gt;\n      {data?.map(instrument =&gt; (\n        &lt;div key={instrument.id}&gt;{instrument.name}&lt;/div&gt;\n      ))}\n      &lt;button onClick={() =&gt; createMutation.mutate({ name: 'New' })}&gt;\n        Add Instrument\n      &lt;/button&gt;\n    &lt;/div&gt;\n  )\n}\n</code></pre>"},{"location":"frontend/#3-forms-react-hook-form-zod","title":"3. Forms (React Hook Form + Zod)","text":"<p>Type-safe form validation:</p> <pre><code>import { useForm } from 'react-hook-form'\nimport { zodResolver } from '@hookform/resolvers/zod'\nimport { z } from 'zod'\n\n// Schema\nconst instrumentSchema = z.object({\n  name: z.string().min(1, 'Name is required'),\n  model: z.string().min(1, 'Model is required'),\n  serial_number: z.string().min(1, 'Serial number is required'),\n  location_id: z.number().positive(),\n})\n\ntype InstrumentForm = z.infer&lt;typeof instrumentSchema&gt;\n\n// Component\nfunction InstrumentForm() {\n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm&lt;InstrumentForm&gt;({\n    resolver: zodResolver(instrumentSchema),\n  })\n\n  const onSubmit = (data: InstrumentForm) =&gt; {\n    console.log(data)\n  }\n\n  return (\n    &lt;form onSubmit={handleSubmit(onSubmit)}&gt;\n      &lt;input {...register('name')} /&gt;\n      {errors.name &amp;&amp; &lt;span&gt;{errors.name.message}&lt;/span&gt;}\n\n      &lt;input {...register('model')} /&gt;\n      {errors.model &amp;&amp; &lt;span&gt;{errors.model.message}&lt;/span&gt;}\n\n      &lt;button type=\"submit\"&gt;Submit&lt;/button&gt;\n    &lt;/form&gt;\n  )\n}\n</code></pre>"},{"location":"frontend/#4-ui-components-radix-ui-tailwind","title":"4. UI Components (Radix UI + Tailwind)","text":"<p>Accessible, styled components:</p> <pre><code>// components/ui/button.tsx\nimport * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  'inline-flex items-center justify-center rounded-md text-sm font-medium transition-colors',\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive: 'bg-destructive text-destructive-foreground hover:bg-destructive/90',\n        outline: 'border border-input bg-background hover:bg-accent',\n        ghost: 'hover:bg-accent hover:text-accent-foreground',\n      },\n      size: {\n        default: 'h-10 px-4 py-2',\n        sm: 'h-9 rounded-md px-3',\n        lg: 'h-11 rounded-md px-8',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  }\n)\n\ninterface ButtonProps\n  extends React.ButtonHTMLAttributes&lt;HTMLButtonElement&gt;,\n    VariantProps&lt;typeof buttonVariants&gt; {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef&lt;HTMLButtonElement, ButtonProps&gt;(\n  ({ className, variant, size, asChild = false, ...props }, ref) =&gt; {\n    const Comp = asChild ? Slot : 'button'\n    return (\n      &lt;Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      /&gt;\n    )\n  }\n)\n\nexport { Button, buttonVariants }\n</code></pre>"},{"location":"frontend/#5-theme-support","title":"5. Theme Support","text":"<p>Dark/Light mode with next-themes:</p> <pre><code>// components/theme-provider.tsx\nimport { ThemeProvider as NextThemesProvider } from 'next-themes'\n\nexport function ThemeProvider({ children }: { children: React.ReactNode }) {\n  return (\n    &lt;NextThemesProvider\n      attribute=\"class\"\n      defaultTheme=\"system\"\n      enableSystem\n      disableTransitionOnChange\n    &gt;\n      {children}\n    &lt;/NextThemesProvider&gt;\n  )\n}\n\n// Usage in component\nimport { useTheme } from 'next-themes'\n\nfunction ThemeToggle() {\n  const { theme, setTheme } = useTheme()\n\n  return (\n    &lt;button onClick={() =&gt; setTheme(theme === 'dark' ? 'light' : 'dark')}&gt;\n      Toggle Theme\n    &lt;/button&gt;\n  )\n}\n</code></pre>"},{"location":"frontend/#api-client-generation","title":"API Client Generation","text":""},{"location":"frontend/#configuration","title":"Configuration","text":"<pre><code>// openapi-ts.config.ts\nimport { defineConfig } from '@hey-api/openapi-ts'\n\nexport default defineConfig({\n  client: '@hey-api/client-axios',\n  input: './openapi.json',\n  output: {\n    path: './src/client',\n    format: 'prettier',\n    lint: 'biome',\n  },\n  types: {\n    enums: 'javascript',\n  },\n})\n</code></pre>"},{"location":"frontend/#generate-client","title":"Generate Client","text":"<pre><code># Download OpenAPI spec from backend\ncurl http://localhost:8000/openapi.json &gt; openapi.json\n\n# Generate TypeScript client\nbun run generate-client\n</code></pre>"},{"location":"frontend/#using-generated-client","title":"Using Generated Client","text":"<pre><code>import { InstrumentsService } from '@/client'\n\n// Configure base URL\nimport { OpenAPI } from '@/client/core/OpenAPI'\nOpenAPI.BASE = import.meta.env.VITE_API_URL || 'http://localhost:8000'\n\n// Use service methods\nconst instruments = await InstrumentsService.listInstruments()\nconst instrument = await InstrumentsService.getInstrument({ id: 1 })\n</code></pre>"},{"location":"frontend/#development","title":"Development","text":""},{"location":"frontend/#setup","title":"Setup","text":"<pre><code># Clone repository\ngit clone https://github.com/FabienMeyer/elims.git\ncd elims/frontend\n\n# Install dependencies\nbun install\n\n# Copy environment file\ncp ../.env.example ../.env\n# Edit .env with your configuration\n\n# Generate API client\nbun run generate-client\n\n# Start development server\nbun run dev\n</code></pre>"},{"location":"frontend/#available-scripts","title":"Available Scripts","text":"<pre><code># Development server (with HMR)\nbun run dev\n\n# Build for production\nbun run build\n\n# Preview production build\nbun run preview\n\n# Lint and auto-fix\nbun run lint\n\n# Generate API client\nbun run generate-client\n\n# Run E2E tests\nbun run test\n\n# Run tests with UI\nbun run test:ui\n</code></pre>"},{"location":"frontend/#development-server","title":"Development Server","text":"<p>Access the application at: http://localhost:5173</p> <p>Features:</p> <ul> <li>Hot Module Replacement (HMR): Instant updates</li> <li>React DevTools: Browser extension</li> <li>TanStack Query DevTools: Embedded in app</li> <li>TanStack Router DevTools: Embedded in app</li> </ul>"},{"location":"frontend/#testing","title":"Testing","text":""},{"location":"frontend/#playwright-e2e-tests","title":"Playwright E2E Tests","text":""},{"location":"frontend/#configuration_1","title":"Configuration","text":"<pre><code>// playwright.config.ts\nimport { defineConfig, devices } from '@playwright/test'\n\nexport default defineConfig({\n  testDir: './tests',\n  fullyParallel: true,\n  forbidOnly: !!process.env.CI,\n  retries: process.env.CI ? 2 : 0,\n  workers: process.env.CI ? 1 : undefined,\n  reporter: 'html',\n  use: {\n    baseURL: 'http://localhost:5173',\n    trace: 'on-first-retry',\n  },\n  projects: [\n    {\n      name: 'chromium',\n      use: { ...devices['Desktop Chrome'] },\n    },\n  ],\n  webServer: {\n    command: 'bun run dev',\n    url: 'http://localhost:5173',\n    reuseExistingServer: !process.env.CI,\n  },\n})\n</code></pre>"},{"location":"frontend/#example-test","title":"Example Test","text":"<pre><code>// tests/home.spec.ts\nimport { test, expect } from '@playwright/test'\n\ntest('homepage loads correctly', async ({ page }) =&gt; {\n  await page.goto('/')\n\n  // Check title\n  await expect(page).toHaveTitle(/ELIMS/)\n\n  // Check heading\n  await expect(page.getByRole('heading', { name: 'Dashboard' })).toBeVisible()\n})\n\ntest('can navigate to instruments page', async ({ page }) =&gt; {\n  await page.goto('/')\n\n  // Click instruments link\n  await page.getByRole('link', { name: 'Instruments' }).click()\n\n  // Check URL\n  await expect(page).toHaveURL(/\\/instruments/)\n\n  // Check heading\n  await expect(page.getByRole('heading', { name: 'Instruments' })).toBeVisible()\n})\n</code></pre>"},{"location":"frontend/#running-tests","title":"Running Tests","text":"<pre><code># Run all tests\nbun run test\n\n# Run with UI mode\nbun run test:ui\n\n# Run specific test file\nbunx playwright test tests/home.spec.ts\n\n# Run in headed mode (see browser)\nbunx playwright test --headed\n\n# Debug mode\nbunx playwright test --debug\n\n# Generate test\nbunx playwright codegen http://localhost:5173\n</code></pre>"},{"location":"frontend/#build-deployment","title":"Build &amp; Deployment","text":""},{"location":"frontend/#production-build","title":"Production Build","text":"<pre><code># Build\nbun run build\n\n# Preview build\nbun run preview\n</code></pre> <p>Output directory: <code>dist/</code></p>"},{"location":"frontend/#docker-deployment","title":"Docker Deployment","text":""},{"location":"frontend/#multi-stage-dockerfile","title":"Multi-stage Dockerfile","text":"<pre><code># Build stage\nFROM oven/bun:1 AS builder\n\nWORKDIR /app\n\nCOPY package.json bun.lockb ./\nRUN bun install --frozen-lockfile\n\nCOPY . .\nRUN bun run build\n\n# Production stage\nFROM nginx:alpine\n\nCOPY --from=builder /app/dist /usr/share/nginx/html\nCOPY nginx.conf /etc/nginx/nginx.conf\n\nEXPOSE 80\n\nCMD [\"nginx\", \"-g\", \"daemon off;\"]\n</code></pre>"},{"location":"frontend/#nginx-configuration","title":"Nginx Configuration","text":"<pre><code>server {\n    listen 80;\n    server_name localhost;\n    root /usr/share/nginx/html;\n    index index.html;\n\n    location / {\n        try_files $uri $uri/ /index.html;\n    }\n\n    location /api {\n        proxy_pass http://backend:8000;\n        proxy_set_header Host $host;\n        proxy_set_header X-Real-IP $remote_addr;\n        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n        proxy_set_header X-Forwarded-Proto $scheme;\n    }\n\n    gzip on;\n    gzip_vary on;\n    gzip_min_length 1024;\n    gzip_types text/plain text/css text/xml text/javascript application/javascript application/json;\n}\n</code></pre>"},{"location":"frontend/#environment-variables","title":"Environment Variables","text":"<pre><code># .env\nVITE_API_URL=http://localhost:8000\n</code></pre> <p>Access in code:</p> <pre><code>const apiUrl = import.meta.env.VITE_API_URL\n</code></pre>"},{"location":"frontend/#styling","title":"Styling","text":""},{"location":"frontend/#tailwind-css","title":"Tailwind CSS","text":"<p>Global styles in <code>index.css</code>:</p> <pre><code>@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n@layer base {\n  :root {\n    --background: 0 0% 100%;\n    --foreground: 0 0% 3.9%;\n    --primary: 0 0% 9%;\n    --primary-foreground: 0 0% 98%;\n    /* ... */\n  }\n\n  .dark {\n    --background: 0 0% 3.9%;\n    --foreground: 0 0% 98%;\n    --primary: 0 0% 98%;\n    --primary-foreground: 0 0% 9%;\n    /* ... */\n  }\n}\n</code></pre>"},{"location":"frontend/#utility-functions","title":"Utility Functions","text":"<pre><code>// lib/utils.ts\nimport { type ClassValue, clsx } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n</code></pre> <p>Usage:</p> <pre><code>&lt;div className={cn('base-class', condition &amp;&amp; 'conditional-class')} /&gt;\n</code></pre>"},{"location":"frontend/#best-practices","title":"Best Practices","text":""},{"location":"frontend/#component-organization","title":"Component Organization","text":"<pre><code>// 1. Imports\nimport { useState } from 'react'\nimport { useQuery } from '@tanstack/react-query'\n\n// 2. Types\ninterface ComponentProps {\n  title: string\n  onAction?: () =&gt; void\n}\n\n// 3. Component\nexport function Component({ title, onAction }: ComponentProps) {\n  // 4. Hooks\n  const [state, setState] = useState(false)\n  const { data } = useQuery(...)\n\n  // 5. Handlers\n  const handleClick = () =&gt; {\n    setState(true)\n    onAction?.()\n  }\n\n  // 6. Render\n  return (\n    &lt;div onClick={handleClick}&gt;\n      {title}\n    &lt;/div&gt;\n  )\n}\n</code></pre>"},{"location":"frontend/#performance","title":"Performance","text":"<ol> <li>Code Splitting: Use dynamic imports</li> </ol> <pre><code>const Component = lazy(() =&gt; import('./Component'))\n</code></pre> <ol> <li>Memoization: Use <code>useMemo</code> and <code>useCallback</code></li> </ol> <pre><code>const memoizedValue = useMemo(() =&gt; computeExpensiveValue(a, b), [a, b])\nconst memoizedCallback = useCallback(() =&gt; doSomething(a, b), [a, b])\n</code></pre> <ol> <li>Virtual Lists: For long lists</li> </ol> <pre><code>import { useVirtualizer } from '@tanstack/react-virtual'\n</code></pre>"},{"location":"frontend/#accessibility","title":"Accessibility","text":"<ol> <li>Semantic HTML: Use proper elements</li> <li>ARIA Labels: Add labels for screen readers</li> <li>Keyboard Navigation: Support keyboard interactions</li> <li>Focus Management: Manage focus states</li> <li>Color Contrast: Ensure sufficient contrast</li> </ol>"},{"location":"frontend/#security","title":"Security","text":"<ol> <li>XSS Prevention: React escapes by default</li> <li>Content Security Policy: Configure headers</li> <li>Sanitize User Input: For dangerouslySetInnerHTML</li> <li>HTTPS Only: In production</li> <li>Secure Cookies: For authentication</li> </ol>"},{"location":"frontend/#troubleshooting","title":"Troubleshooting","text":""},{"location":"frontend/#common-issues","title":"Common Issues","text":"<ol> <li> <p>API Connection Errors</p> </li> <li> <p>Check VITE_API_URL</p> </li> <li>Verify backend is running</li> <li> <p>Check CORS configuration</p> </li> <li> <p>Build Errors</p> </li> <li> <p>Clear node_modules and reinstall</p> </li> <li>Check TypeScript errors</li> <li> <p>Verify import paths</p> </li> <li> <p>Hot Reload Not Working</p> </li> <li> <p>Restart development server</p> </li> <li>Check file watcher limits</li> <li>Clear Vite cache</li> </ol>"},{"location":"frontend/#debugging","title":"Debugging","text":"<pre><code>// React DevTools\n// Browser extension for inspecting components\n\n// TanStack Query DevTools\nimport { ReactQueryDevtools } from '@tanstack/react-query-devtools'\n\n// TanStack Router DevTools\nimport { TanStackRouterDevtools } from '@tanstack/router-devtools'\n\n// Console logging\nconsole.log('Debug:', data)\nconsole.table(array)\nconsole.error('Error:', error)\n</code></pre>"},{"location":"frontend/#related-documentation","title":"Related Documentation","text":"<ul> <li>Backend Documentation</li> <li>Workflows Documentation</li> <li>Testing Documentation</li> </ul>"},{"location":"packages/elims-common/","title":"ELIMS Common","text":""},{"location":"packages/elims-common/#elims-common-package","title":"ELIMS Common Package","text":""},{"location":"packages/elims-common/#overview","title":"Overview","text":"<p><code>elims-common</code> is a shared Python package containing common utilities, models, and functions used across the ELIMS ecosystem. It provides reusable components for data validation, configuration management, and shared business logic.</p>"},{"location":"packages/elims-common/#package-information","title":"Package Information","text":"<ul> <li>Name: elims-common</li> <li>Version: 0.0.1</li> <li>Python: 3.13+</li> <li>License: MIT</li> </ul>"},{"location":"packages/elims-common/#installation","title":"Installation","text":""},{"location":"packages/elims-common/#from-source","title":"From Source","text":"<pre><code># Navigate to package directory\ncd packages/elims-common\n\n# Install in development mode\nuv pip install -e .\n\n# Or with development dependencies\nuv pip install -e \".[dev]\"\n</code></pre>"},{"location":"packages/elims-common/#as-dependency","title":"As Dependency","text":"<p>Add to your <code>pyproject.toml</code>:</p> <pre><code>[project]\ndependencies = [\n    \"elims-common @ file:///path/to/packages/elims-common\",\n]\n</code></pre>"},{"location":"packages/elims-common/#package-structure","title":"Package Structure","text":"<pre><code>elims-common/\n\u251c\u2500\u2500 elims_common/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 elims_elims.py     # Main module\n\u251c\u2500\u2500 tests/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 test_elims.py      # Test suite\n\u251c\u2500\u2500 pyproject.toml         # Package configuration\n\u2514\u2500\u2500 README.md\n</code></pre>"},{"location":"packages/elims-common/#core-components","title":"Core Components","text":""},{"location":"packages/elims-common/#1-pydantic-models","title":"1. Pydantic Models","text":"<p>Base models for data validation and serialization:</p> <pre><code>from pydantic import BaseModel, Field, ConfigDict\nfrom datetime import datetime\nfrom typing import Optional\n\nclass BaseInstrument(BaseModel):\n    \"\"\"Base model for laboratory instruments\"\"\"\n\n    model_config = ConfigDict(\n        from_attributes=True,\n        validate_assignment=True,\n    )\n\n    name: str = Field(..., min_length=1, max_length=255)\n    model: str = Field(..., min_length=1, max_length=255)\n    serial_number: str = Field(..., min_length=1, max_length=255)\n    manufacturer: Optional[str] = None\n    status: str = Field(default=\"active\", pattern=\"^(active|inactive|maintenance)$\")\n\n    def is_active(self) -&gt; bool:\n        \"\"\"Check if instrument is active\"\"\"\n        return self.status == \"active\"\n\nclass BaseLocation(BaseModel):\n    \"\"\"Base model for laboratory locations\"\"\"\n\n    model_config = ConfigDict(from_attributes=True)\n\n    name: str = Field(..., min_length=1, max_length=255)\n    building: str\n    floor: Optional[int] = None\n    room: Optional[str] = None\n    capacity: Optional[int] = Field(None, ge=0)\n</code></pre>"},{"location":"packages/elims-common/#2-configuration-utilities","title":"2. Configuration Utilities","text":"<p>Shared configuration management:</p> <pre><code>from pydantic_settings import BaseSettings\nfrom typing import Optional\n\nclass DatabaseConfig(BaseSettings):\n    \"\"\"Database configuration\"\"\"\n\n    host: str\n    port: int = 3306\n    user: str\n    password: str\n    database: str\n\n    model_config = {\n        \"env_prefix\": \"MARIADB_\",\n    }\n\n    @property\n    def url(self) -&gt; str:\n        \"\"\"Get database URL\"\"\"\n        return f\"mysql+pymysql://{self.user}:{self.password}@{self.host}:{self.port}/{self.database}\"\n\nclass CacheConfig(BaseSettings):\n    \"\"\"Cache configuration\"\"\"\n\n    host: str\n    port: int = 6379\n    password: Optional[str] = None\n    db: int = 0\n\n    model_config = {\n        \"env_prefix\": \"REDIS_\",\n    }\n\n    @property\n    def url(self) -&gt; str:\n        \"\"\"Get Redis URL\"\"\"\n        if self.password:\n            return f\"redis://:{self.password}@{self.host}:{self.port}/{self.db}\"\n        return f\"redis://{self.host}:{self.port}/{self.db}\"\n\nclass MQTTConfig(BaseSettings):\n    \"\"\"MQTT broker configuration\"\"\"\n\n    host: str\n    port: int = 8883\n    username: Optional[str] = None\n    password: Optional[str] = None\n    keepalive: int = 60\n\n    model_config = {\n        \"env_prefix\": \"MQTT_\",\n    }\n</code></pre>"},{"location":"packages/elims-common/#3-validation-functions","title":"3. Validation Functions","text":"<p>Common validation utilities:</p> <pre><code>import re\nfrom typing import Any\n\ndef validate_serial_number(serial: str) -&gt; bool:\n    \"\"\"\n    Validate instrument serial number format\n\n    Args:\n        serial: Serial number to validate\n\n    Returns:\n        True if valid, False otherwise\n    \"\"\"\n    # Example: SN followed by 6-12 alphanumeric characters\n    pattern = r'^SN[A-Z0-9]{6,12}$'\n    return bool(re.match(pattern, serial))\n\ndef validate_ip_address(ip: str) -&gt; bool:\n    \"\"\"\n    Validate IPv4 address\n\n    Args:\n        ip: IP address to validate\n\n    Returns:\n        True if valid, False otherwise\n    \"\"\"\n    pattern = r'^(\\d{1,3}\\.){3}\\d{1,3}$'\n    if not re.match(pattern, ip):\n        return False\n\n    # Check each octet is 0-255\n    octets = ip.split('.')\n    return all(0 &lt;= int(octet) &lt;= 255 for octet in octets)\n\ndef sanitize_filename(filename: str) -&gt; str:\n    \"\"\"\n    Sanitize filename for safe file system operations\n\n    Args:\n        filename: Original filename\n\n    Returns:\n        Sanitized filename\n    \"\"\"\n    # Remove or replace unsafe characters\n    filename = re.sub(r'[&lt;&gt;:\"/\\\\|?*]', '_', filename)\n    # Remove leading/trailing spaces and dots\n    filename = filename.strip('. ')\n    # Limit length\n    return filename[:255]\n</code></pre>"},{"location":"packages/elims-common/#4-constants-and-enums","title":"4. Constants and Enums","text":"<p>Shared constants:</p> <pre><code>from enum import Enum\n\nclass InstrumentStatus(str, Enum):\n    \"\"\"Instrument status enumeration\"\"\"\n    ACTIVE = \"active\"\n    INACTIVE = \"inactive\"\n    MAINTENANCE = \"maintenance\"\n    CALIBRATION = \"calibration\"\n    RETIRED = \"retired\"\n\nclass MeasurementUnit(str, Enum):\n    \"\"\"Common measurement units\"\"\"\n    CELSIUS = \"\u00b0C\"\n    FAHRENHEIT = \"\u00b0F\"\n    KELVIN = \"K\"\n    GRAM = \"g\"\n    KILOGRAM = \"kg\"\n    MILLIGRAM = \"mg\"\n    LITER = \"L\"\n    MILLILITER = \"mL\"\n    MICROLITER = \"\u00b5L\"\n\n# API Constants\nAPI_VERSION = \"v1\"\nMAX_PAGE_SIZE = 100\nDEFAULT_PAGE_SIZE = 20\n\n# Time Constants\nCACHE_TTL_SHORT = 60  # 1 minute\nCACHE_TTL_MEDIUM = 300  # 5 minutes\nCACHE_TTL_LONG = 3600  # 1 hour\n</code></pre>"},{"location":"packages/elims-common/#5-utility-functions","title":"5. Utility Functions","text":"<p>General-purpose utilities:</p> <pre><code>from datetime import datetime, timezone\nfrom typing import Optional\nimport hashlib\n\ndef utc_now() -&gt; datetime:\n    \"\"\"Get current UTC datetime\"\"\"\n    return datetime.now(timezone.utc)\n\ndef format_datetime(dt: datetime, format: str = \"%Y-%m-%d %H:%M:%S\") -&gt; str:\n    \"\"\"Format datetime to string\"\"\"\n    return dt.strftime(format)\n\ndef parse_datetime(dt_str: str, format: str = \"%Y-%m-%d %H:%M:%S\") -&gt; datetime:\n    \"\"\"Parse datetime from string\"\"\"\n    return datetime.strptime(dt_str, format)\n\ndef hash_string(text: str, algorithm: str = \"sha256\") -&gt; str:\n    \"\"\"\n    Hash a string using specified algorithm\n\n    Args:\n        text: Text to hash\n        algorithm: Hash algorithm (sha256, sha512, md5)\n\n    Returns:\n        Hexadecimal hash string\n    \"\"\"\n    hasher = hashlib.new(algorithm)\n    hasher.update(text.encode('utf-8'))\n    return hasher.hexdigest()\n\ndef truncate_string(text: str, length: int = 50, suffix: str = \"...\") -&gt; str:\n    \"\"\"\n    Truncate string to specified length\n\n    Args:\n        text: Text to truncate\n        length: Maximum length\n        suffix: Suffix to add if truncated\n\n    Returns:\n        Truncated string\n    \"\"\"\n    if len(text) &lt;= length:\n        return text\n    return text[:length - len(suffix)] + suffix\n</code></pre>"},{"location":"packages/elims-common/#usage-examples","title":"Usage Examples","text":""},{"location":"packages/elims-common/#basic-model-usage","title":"Basic Model Usage","text":"<pre><code>from elims_common.models import BaseInstrument, BaseLocation\n\n# Create instrument\ninstrument = BaseInstrument(\n    name=\"UV-Vis Spectrophotometer\",\n    model=\"Lambda 365\",\n    serial_number=\"SN12345678\",\n    manufacturer=\"PerkinElmer\",\n    status=\"active\",\n)\n\n# Validate and access data\nprint(instrument.name)  # UV-Vis Spectrophotometer\nprint(instrument.is_active())  # True\n\n# Serialize to dict\ndata = instrument.model_dump()\n\n# Serialize to JSON\njson_str = instrument.model_dump_json()\n</code></pre>"},{"location":"packages/elims-common/#configuration-management","title":"Configuration Management","text":"<pre><code>from elims_common.config import DatabaseConfig, CacheConfig, MQTTConfig\n\n# Load from environment variables\ndb_config = DatabaseConfig()\nprint(db_config.url)  # mysql+pymysql://user:pass@host:3306/db\n\ncache_config = CacheConfig()\nprint(cache_config.url)  # redis://:pass@host:6379/0\n\nmqtt_config = MQTTConfig()\nprint(f\"{mqtt_config.host}:{mqtt_config.port}\")\n</code></pre>"},{"location":"packages/elims-common/#validation","title":"Validation","text":"<pre><code>from elims_common.validators import validate_serial_number, validate_ip_address\n\n# Validate serial number\nif validate_serial_number(\"SN12345678\"):\n    print(\"Valid serial number\")\n\n# Validate IP address\nif validate_ip_address(\"192.168.1.1\"):\n    print(\"Valid IP address\")\n</code></pre>"},{"location":"packages/elims-common/#development","title":"Development","text":""},{"location":"packages/elims-common/#setup","title":"Setup","text":"<pre><code># Navigate to package directory\ncd packages/elims-common\n\n# Install in development mode with dev dependencies\nuv pip install -e \".[dev]\"\n</code></pre>"},{"location":"packages/elims-common/#testing","title":"Testing","text":"<pre><code># Run tests\npytest\n\n# Run with coverage\npytest --cov=elims_common --cov-report=html\n\n# Run specific test\npytest tests/test_elims.py::test_function_name\n</code></pre>"},{"location":"packages/elims-common/#code-quality","title":"Code Quality","text":"<pre><code># Type checking\nmypy elims_common\n\n# Linting\nruff check elims_common\n\n# Auto-fix issues\nruff check elims_common --fix\n\n# Format code\nruff format elims_common\n</code></pre>"},{"location":"packages/elims-common/#publishing","title":"Publishing","text":""},{"location":"packages/elims-common/#build-package","title":"Build Package","text":"<pre><code># Build wheel and sdist\npython -m build\n</code></pre>"},{"location":"packages/elims-common/#install-locally","title":"Install Locally","text":"<pre><code># Install from wheel\npip install dist/elims_common-0.0.1-py3-none-any.whl\n</code></pre>"},{"location":"packages/elims-common/#api-reference","title":"API Reference","text":""},{"location":"packages/elims-common/#models","title":"Models","text":"<ul> <li><code>BaseInstrument</code>: Base model for instruments</li> <li><code>BaseLocation</code>: Base model for locations</li> <li><code>BaseMeasurement</code>: Base model for measurements</li> <li><code>BaseUser</code>: Base model for users</li> </ul>"},{"location":"packages/elims-common/#configuration","title":"Configuration","text":"<ul> <li><code>DatabaseConfig</code>: Database connection settings</li> <li><code>CacheConfig</code>: Redis cache settings</li> <li><code>MQTTConfig</code>: MQTT broker settings</li> </ul>"},{"location":"packages/elims-common/#validators","title":"Validators","text":"<ul> <li><code>validate_serial_number()</code>: Validate serial number format</li> <li><code>validate_ip_address()</code>: Validate IPv4 address</li> <li><code>sanitize_filename()</code>: Sanitize filename</li> <li><code>validate_email()</code>: Validate email address</li> </ul>"},{"location":"packages/elims-common/#constants","title":"Constants","text":"<ul> <li><code>InstrumentStatus</code>: Instrument status enum</li> <li><code>MeasurementUnit</code>: Measurement unit enum</li> <li><code>API_VERSION</code>: API version constant</li> <li>Cache TTL constants</li> </ul>"},{"location":"packages/elims-common/#utilities","title":"Utilities","text":"<ul> <li><code>utc_now()</code>: Get current UTC time</li> <li><code>format_datetime()</code>: Format datetime to string</li> <li><code>parse_datetime()</code>: Parse datetime from string</li> <li><code>hash_string()</code>: Hash string</li> <li><code>truncate_string()</code>: Truncate string</li> </ul>"},{"location":"packages/elims-common/#best-practices","title":"Best Practices","text":"<ol> <li>Type Hints: Use type hints for all functions</li> <li>Validation: Leverage Pydantic for data validation</li> <li>Immutability: Prefer immutable data structures</li> <li>Documentation: Document all public APIs</li> <li>Testing: Maintain high test coverage (&gt;80%)</li> <li>Versioning: Follow semantic versioning</li> </ol>"},{"location":"packages/elims-common/#dependencies","title":"Dependencies","text":""},{"location":"packages/elims-common/#core-dependencies","title":"Core Dependencies","text":"<ul> <li><code>pydantic&gt;=2.0.0</code>: Data validation</li> <li><code>pydantic-settings&gt;=2.0.0</code>: Settings management</li> </ul>"},{"location":"packages/elims-common/#development-dependencies","title":"Development Dependencies","text":"<ul> <li><code>pytest&gt;=7.4.0</code>: Testing framework</li> <li><code>pytest-cov&gt;=4.1.0</code>: Coverage reporting</li> <li><code>pytest-asyncio&gt;=0.21.0</code>: Async testing</li> <li><code>ruff&gt;=0.1.0</code>: Linting and formatting</li> <li><code>mypy&gt;=1.5.0</code>: Static type checking</li> </ul>"},{"location":"packages/elims-common/#contributing","title":"Contributing","text":"<ol> <li>Make changes in <code>elims_common/</code> directory</li> <li>Add tests in <code>tests/</code> directory</li> <li>Run tests: <code>pytest</code></li> <li>Check types: <code>mypy elims_common</code></li> <li>Format code: <code>ruff format elims_common</code></li> <li>Update version in <code>pyproject.toml</code></li> </ol>"},{"location":"packages/elims-common/#license","title":"License","text":"<p>MIT License - see LICENSE file for details</p>"},{"location":"packages/elims-common/#related-documentation","title":"Related Documentation","text":"<ul> <li>Backend Documentation</li> <li>ELIMS Raspberry Package</li> <li>API Documentation</li> </ul>"},{"location":"packages/elims-raspberry/","title":"ELIMS Raspberry","text":""},{"location":"packages/elims-raspberry/#elims-raspberry-package","title":"ELIMS Raspberry Package","text":""},{"location":"packages/elims-raspberry/#overview","title":"Overview","text":"<p><code>elims-raspberry</code> is a specialized Python package designed for running ELIMS components on Raspberry Pi devices. It provides lightweight data collection, instrument communication, and edge computing capabilities for laboratory equipment interfacing.</p>"},{"location":"packages/elims-raspberry/#package-information","title":"Package Information","text":"<ul> <li>Name: elims-raspberry</li> <li>Version: 0.0.1</li> <li>Python: 3.13+</li> <li>License: MIT</li> <li>Platform: Raspberry Pi (compatible with other Linux systems)</li> </ul>"},{"location":"packages/elims-raspberry/#installation","title":"Installation","text":""},{"location":"packages/elims-raspberry/#prerequisites","title":"Prerequisites","text":"<ul> <li>Raspberry Pi (3B+ or newer recommended)</li> <li>Raspberry Pi OS (64-bit recommended)</li> <li>Python 3.13+</li> <li>Network connectivity</li> </ul>"},{"location":"packages/elims-raspberry/#from-source","title":"From Source","text":"<pre><code># Navigate to package directory\ncd packages/elims-raspberry\n\n# Install in development mode\nuv pip install -e .\n\n# Or with development dependencies\nuv pip install -e \".[dev]\"\n</code></pre>"},{"location":"packages/elims-raspberry/#system-dependencies","title":"System Dependencies","text":"<pre><code># Update system\nsudo apt update &amp;&amp; sudo apt upgrade -y\n\n# Install Python 3.13 (if not available)\nsudo apt install python3.13 python3.13-venv python3.13-dev\n\n# Install system libraries\nsudo apt install -y \\\n    libgpiod2 \\\n    i2c-tools \\\n    python3-smbus \\\n    git\n</code></pre>"},{"location":"packages/elims-raspberry/#package-structure","title":"Package Structure","text":"<pre><code>elims-raspberry/\n\u251c\u2500\u2500 elims_raspberry/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 elims_raspberry.py   # Main module\n\u251c\u2500\u2500 tests/\n\u2502   \u251c\u2500\u2500 __init__.py\n\u2502   \u2514\u2500\u2500 test_elims_raspberry.py\n\u251c\u2500\u2500 pyproject.toml           # Package configuration\n\u2514\u2500\u2500 README.md\n</code></pre>"},{"location":"packages/elims-raspberry/#core-features","title":"Core Features","text":""},{"location":"packages/elims-raspberry/#1-gpio-control","title":"1. GPIO Control","text":"<p>Interface with laboratory equipment via GPIO pins:</p> <pre><code>from elims_raspberry import GPIOController\nfrom elims_raspberry.enums import PinMode, PinState\n\nclass EquipmentController:\n    \"\"\"Control equipment via GPIO\"\"\"\n\n    def __init__(self):\n        self.gpio = GPIOController()\n\n    def setup_relay(self, pin: int):\n        \"\"\"Setup relay control pin\"\"\"\n        self.gpio.setup_pin(pin, PinMode.OUTPUT)\n\n    def turn_on(self, pin: int):\n        \"\"\"Turn on equipment\"\"\"\n        self.gpio.write_pin(pin, PinState.HIGH)\n\n    def turn_off(self, pin: int):\n        \"\"\"Turn off equipment\"\"\"\n        self.gpio.write_pin(pin, PinState.LOW)\n\n    def read_sensor(self, pin: int) -&gt; bool:\n        \"\"\"Read digital sensor\"\"\"\n        self.gpio.setup_pin(pin, PinMode.INPUT)\n        state = self.gpio.read_pin(pin)\n        return state == PinState.HIGH\n\n    def cleanup(self):\n        \"\"\"Cleanup GPIO\"\"\"\n        self.gpio.cleanup()\n\n# Usage\ncontroller = EquipmentController()\ncontroller.setup_relay(17)\ncontroller.turn_on(17)\n# ... do work ...\ncontroller.turn_off(17)\ncontroller.cleanup()\n</code></pre>"},{"location":"packages/elims-raspberry/#2-serial-communication","title":"2. Serial Communication","text":"<p>Communicate with instruments via serial port:</p> <pre><code>from elims_raspberry import SerialDevice\nimport time\n\nclass InstrumentReader:\n    \"\"\"Read data from serial instruments\"\"\"\n\n    def __init__(self, port: str = \"/dev/ttyUSB0\", baudrate: int = 9600):\n        self.device = SerialDevice(\n            port=port,\n            baudrate=baudrate,\n            timeout=1.0,\n        )\n\n    def connect(self):\n        \"\"\"Connect to instrument\"\"\"\n        self.device.open()\n\n    def read_measurement(self) -&gt; str:\n        \"\"\"Read measurement from instrument\"\"\"\n        # Send command\n        self.device.write(b\"MEAS?\\n\")\n\n        # Wait for response\n        time.sleep(0.1)\n\n        # Read response\n        response = self.device.read_line()\n        return response.decode('ascii').strip()\n\n    def configure(self, settings: dict):\n        \"\"\"Configure instrument\"\"\"\n        for key, value in settings.items():\n            command = f\"{key}:{value}\\n\".encode('ascii')\n            self.device.write(command)\n            time.sleep(0.05)\n\n    def disconnect(self):\n        \"\"\"Disconnect from instrument\"\"\"\n        self.device.close()\n\n# Usage\nreader = InstrumentReader(port=\"/dev/ttyUSB0\")\nreader.connect()\nmeasurement = reader.read_measurement()\nprint(f\"Measurement: {measurement}\")\nreader.disconnect()\n</code></pre>"},{"location":"packages/elims-raspberry/#3-i2c-communication","title":"3. I2C Communication","text":"<p>Interface with I2C sensors and devices:</p> <pre><code>from elims_raspberry import I2CDevice\n\nclass TemperatureSensor:\n    \"\"\"Read temperature from I2C sensor\"\"\"\n\n    # Common I2C addresses\n    BMP280_ADDR = 0x76\n    BME280_ADDR = 0x77\n\n    def __init__(self, address: int = BME280_ADDR, bus: int = 1):\n        self.device = I2CDevice(address=address, bus=bus)\n        self.initialize()\n\n    def initialize(self):\n        \"\"\"Initialize sensor\"\"\"\n        # Write configuration to registers\n        self.device.write_byte(0xF4, 0x27)  # Control register\n        self.device.write_byte(0xF5, 0xA0)  # Config register\n\n    def read_temperature(self) -&gt; float:\n        \"\"\"Read temperature in Celsius\"\"\"\n        # Read raw data from registers\n        msb = self.device.read_byte(0xFA)\n        lsb = self.device.read_byte(0xFB)\n        xlsb = self.device.read_byte(0xFC)\n\n        # Combine bytes\n        raw_temp = (msb &lt;&lt; 12) | (lsb &lt;&lt; 4) | (xlsb &gt;&gt; 4)\n\n        # Convert to temperature (simplified)\n        temperature = (raw_temp / 16384.0) - 273.15\n\n        return round(temperature, 2)\n\n    def read_humidity(self) -&gt; float:\n        \"\"\"Read humidity percentage\"\"\"\n        msb = self.device.read_byte(0xFD)\n        lsb = self.device.read_byte(0xFE)\n\n        raw_humidity = (msb &lt;&lt; 8) | lsb\n        humidity = (raw_humidity / 65536.0) * 100\n\n        return round(humidity, 2)\n\n# Usage\nsensor = TemperatureSensor()\ntemp = sensor.read_temperature()\nhumidity = sensor.read_humidity()\nprint(f\"Temperature: {temp}\u00b0C, Humidity: {humidity}%\")\n</code></pre>"},{"location":"packages/elims-raspberry/#4-mqtt-client","title":"4. MQTT Client","text":"<p>Publish sensor data to MQTT broker:</p> <pre><code>from elims_raspberry import MQTTPublisher\nimport time\n\nclass DataPublisher:\n    \"\"\"Publish sensor data via MQTT\"\"\"\n\n    def __init__(self, broker: str, port: int = 8883):\n        self.publisher = MQTTPublisher(\n            broker=broker,\n            port=port,\n            client_id=\"raspberry-pi-01\",\n        )\n        self.topic_prefix = \"lab/instruments\"\n\n    def connect(self, username: str = None, password: str = None):\n        \"\"\"Connect to MQTT broker\"\"\"\n        if username and password:\n            self.publisher.set_credentials(username, password)\n\n        self.publisher.connect()\n\n    def publish_measurement(self, instrument_id: str, measurement: dict):\n        \"\"\"Publish measurement data\"\"\"\n        topic = f\"{self.topic_prefix}/{instrument_id}/measurement\"\n        self.publisher.publish(topic, measurement)\n\n    def publish_status(self, instrument_id: str, status: str):\n        \"\"\"Publish instrument status\"\"\"\n        topic = f\"{self.topic_prefix}/{instrument_id}/status\"\n        self.publisher.publish(topic, {\"status\": status})\n\n    def disconnect(self):\n        \"\"\"Disconnect from broker\"\"\"\n        self.publisher.disconnect()\n\n# Usage\npublisher = DataPublisher(broker=\"mqtt.example.com\")\npublisher.connect(username=\"user\", password=\"pass\")\n\n# Publish measurement\npublisher.publish_measurement(\n    \"INSTRUMENT-001\",\n    {\n        \"temperature\": 25.5,\n        \"humidity\": 45.2,\n        \"timestamp\": \"2026-01-23T10:30:00Z\"\n    }\n)\n\npublisher.disconnect()\n</code></pre>"},{"location":"packages/elims-raspberry/#5-data-logger","title":"5. Data Logger","text":"<p>Log sensor data locally:</p> <pre><code>from elims_raspberry import DataLogger\nfrom datetime import datetime\n\nclass LocalLogger:\n    \"\"\"Log measurements to local storage\"\"\"\n\n    def __init__(self, log_dir: str = \"/var/log/elims\"):\n        self.logger = DataLogger(\n            log_dir=log_dir,\n            rotation_size=\"10MB\",\n            retention_days=30,\n        )\n\n    def log_measurement(self, instrument_id: str, data: dict):\n        \"\"\"Log measurement data\"\"\"\n        entry = {\n            \"timestamp\": datetime.utcnow().isoformat(),\n            \"instrument_id\": instrument_id,\n            \"data\": data,\n        }\n        self.logger.write(entry)\n\n    def log_event(self, event_type: str, message: str):\n        \"\"\"Log system event\"\"\"\n        entry = {\n            \"timestamp\": datetime.utcnow().isoformat(),\n            \"type\": event_type,\n            \"message\": message,\n        }\n        self.logger.write(entry, log_name=\"events\")\n\n    def get_logs(self, start_date: str = None, end_date: str = None):\n        \"\"\"Retrieve logs within date range\"\"\"\n        return self.logger.query(start_date, end_date)\n\n# Usage\nlogger = LocalLogger()\nlogger.log_measurement(\"INST-001\", {\"temp\": 25.5})\nlogger.log_event(\"startup\", \"System initialized\")\n</code></pre>"},{"location":"packages/elims-raspberry/#configuration","title":"Configuration","text":""},{"location":"packages/elims-raspberry/#device-configuration","title":"Device Configuration","text":"<pre><code>from pydantic import BaseModel, Field\nfrom typing import Optional\n\nclass RaspberryPiConfig(BaseModel):\n    \"\"\"Raspberry Pi configuration\"\"\"\n\n    device_id: str = Field(..., description=\"Unique device identifier\")\n    location: str = Field(..., description=\"Physical location\")\n\n    # MQTT Configuration\n    mqtt_broker: str\n    mqtt_port: int = 8883\n    mqtt_username: Optional[str] = None\n    mqtt_password: Optional[str] = None\n    mqtt_topic_prefix: str = \"lab/instruments\"\n\n    # Sampling Configuration\n    sampling_interval: int = Field(default=60, ge=1, description=\"Seconds between samples\")\n    batch_size: int = Field(default=10, ge=1, description=\"Number of samples per batch\")\n\n    # Storage Configuration\n    log_directory: str = \"/var/log/elims\"\n    max_log_size: str = \"10MB\"\n    log_retention_days: int = 30\n\n    # GPIO Configuration\n    gpio_pins: dict = Field(default_factory=dict)\n\n    class Config:\n        env_prefix = \"ELIMS_\"\n\n# Load configuration\nconfig = RaspberryPiConfig(\n    device_id=\"RPI-LAB-001\",\n    location=\"Laboratory A\",\n    mqtt_broker=\"mqtt.example.com\",\n)\n</code></pre>"},{"location":"packages/elims-raspberry/#complete-example-temperature-monitor","title":"Complete Example: Temperature Monitor","text":"<pre><code>#!/usr/bin/env python3\n\"\"\"\nTemperature monitoring system for Raspberry Pi\nReads temperature from sensor and publishes to MQTT\n\"\"\"\n\nfrom elims_raspberry import (\n    I2CDevice,\n    MQTTPublisher,\n    DataLogger,\n    GPIOController,\n)\nfrom elims_raspberry.config import RaspberryPiConfig\nimport time\nimport signal\nimport sys\n\nclass TemperatureMonitor:\n    \"\"\"Monitor and publish temperature data\"\"\"\n\n    def __init__(self, config: RaspberryPiConfig):\n        self.config = config\n        self.running = False\n\n        # Initialize components\n        self.sensor = I2CDevice(address=0x76)\n        self.mqtt = MQTTPublisher(\n            broker=config.mqtt_broker,\n            port=config.mqtt_port,\n            client_id=config.device_id,\n        )\n        self.logger = DataLogger(log_dir=config.log_directory)\n        self.gpio = GPIOController()\n\n        # Setup signal handlers\n        signal.signal(signal.SIGINT, self.shutdown)\n        signal.signal(signal.SIGTERM, self.shutdown)\n\n    def start(self):\n        \"\"\"Start monitoring\"\"\"\n        print(f\"Starting temperature monitor: {self.config.device_id}\")\n\n        # Connect to MQTT\n        if self.config.mqtt_username:\n            self.mqtt.set_credentials(\n                self.config.mqtt_username,\n                self.config.mqtt_password,\n            )\n        self.mqtt.connect()\n\n        # Initialize sensor\n        self.sensor.write_byte(0xF4, 0x27)\n\n        # Start monitoring loop\n        self.running = True\n        self.monitor_loop()\n\n    def monitor_loop(self):\n        \"\"\"Main monitoring loop\"\"\"\n        while self.running:\n            try:\n                # Read temperature\n                temp = self.read_temperature()\n\n                # Prepare data\n                data = {\n                    \"device_id\": self.config.device_id,\n                    \"location\": self.config.location,\n                    \"temperature\": temp,\n                    \"unit\": \"celsius\",\n                    \"timestamp\": time.time(),\n                }\n\n                # Publish to MQTT\n                topic = f\"{self.config.mqtt_topic_prefix}/{self.config.device_id}/temperature\"\n                self.mqtt.publish(topic, data)\n\n                # Log locally\n                self.logger.write(data)\n\n                print(f\"Temperature: {temp}\u00b0C\")\n\n                # Wait for next sample\n                time.sleep(self.config.sampling_interval)\n\n            except Exception as e:\n                print(f\"Error: {e}\")\n                self.logger.write({\"error\": str(e)}, log_name=\"errors\")\n                time.sleep(5)\n\n    def read_temperature(self) -&gt; float:\n        \"\"\"Read temperature from sensor\"\"\"\n        msb = self.sensor.read_byte(0xFA)\n        lsb = self.sensor.read_byte(0xFB)\n        xlsb = self.sensor.read_byte(0xFC)\n\n        raw_temp = (msb &lt;&lt; 12) | (lsb &lt;&lt; 4) | (xlsb &gt;&gt; 4)\n        temperature = (raw_temp / 16384.0) - 273.15\n\n        return round(temperature, 2)\n\n    def shutdown(self, signum, frame):\n        \"\"\"Graceful shutdown\"\"\"\n        print(\"\\nShutting down...\")\n        self.running = False\n        self.mqtt.disconnect()\n        self.gpio.cleanup()\n        sys.exit(0)\n\nif __name__ == \"__main__\":\n    # Load configuration\n    config = RaspberryPiConfig(\n        device_id=\"RPI-LAB-001\",\n        location=\"Laboratory A\",\n        mqtt_broker=\"mqtt.example.com\",\n        mqtt_username=\"lab_user\",\n        mqtt_password=\"secure_password\",\n        sampling_interval=30,\n    )\n\n    # Start monitor\n    monitor = TemperatureMonitor(config)\n    monitor.start()\n</code></pre>"},{"location":"packages/elims-raspberry/#systemd-service","title":"Systemd Service","text":"<p>Create a systemd service for automatic startup:</p> <pre><code># /etc/systemd/system/elims-monitor.service\n[Unit]\nDescription=ELIMS Temperature Monitor\nAfter=network.target\n\n[Service]\nType=simple\nUser=pi\nWorkingDirectory=/home/pi/elims\nExecStart=/home/pi/elims/.venv/bin/python /home/pi/elims/monitor.py\nRestart=always\nRestartSec=10\nEnvironment=\"ELIMS_DEVICE_ID=RPI-LAB-001\"\nEnvironment=\"ELIMS_MQTT_BROKER=mqtt.example.com\"\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> <p>Enable and start service:</p> <pre><code># Enable service\nsudo systemctl enable elims-monitor.service\n\n# Start service\nsudo systemctl start elims-monitor.service\n\n# Check status\nsudo systemctl status elims-monitor.service\n\n# View logs\nsudo journalctl -u elims-monitor.service -f\n</code></pre>"},{"location":"packages/elims-raspberry/#hardware-setup","title":"Hardware Setup","text":""},{"location":"packages/elims-raspberry/#gpio-pinout","title":"GPIO Pinout","text":"<p>Common GPIO pin usage:</p> <pre><code>Pin 1  (3.3V)     Pin 2  (5V)\nPin 3  (GPIO 2)   Pin 4  (5V)\nPin 5  (GPIO 3)   Pin 6  (GND)\nPin 7  (GPIO 4)   Pin 8  (GPIO 14)\nPin 9  (GND)      Pin 10 (GPIO 15)\nPin 11 (GPIO 17)  Pin 12 (GPIO 18)\n...\n</code></pre>"},{"location":"packages/elims-raspberry/#i2c-devices","title":"I2C Devices","text":"<p>Enable I2C:</p> <pre><code># Enable I2C interface\nsudo raspi-config\n# Navigate to: Interface Options &gt; I2C &gt; Enable\n\n# Reboot\nsudo reboot\n\n# Test I2C\ni2cdetect -y 1\n</code></pre>"},{"location":"packages/elims-raspberry/#serial-devices","title":"Serial Devices","text":"<p>Enable serial:</p> <pre><code># Enable serial\nsudo raspi-config\n# Navigate to: Interface Options &gt; Serial Port\n# Disable login shell, Enable serial hardware\n\n# Reboot\nsudo reboot\n</code></pre>"},{"location":"packages/elims-raspberry/#development","title":"Development","text":""},{"location":"packages/elims-raspberry/#setup-development-environment","title":"Setup Development Environment","text":"<pre><code># Install package in development mode\ncd packages/elims-raspberry\nuv pip install -e \".[dev]\"\n\n# Install system dependencies\nsudo apt install -y \\\n    libgpiod2 \\\n    i2c-tools \\\n    python3-smbus\n</code></pre>"},{"location":"packages/elims-raspberry/#testing","title":"Testing","text":"<pre><code># Run tests\npytest\n\n# Run with coverage\npytest --cov=elims_raspberry --cov-report=html\n\n# Run hardware tests (requires actual hardware)\npytest -m hardware\n</code></pre>"},{"location":"packages/elims-raspberry/#mock-hardware-for-testing","title":"Mock Hardware for Testing","text":"<pre><code>from unittest.mock import Mock, patch\n\nclass TestTemperatureSensor:\n    \"\"\"Test sensor with mocked hardware\"\"\"\n\n    @patch('elims_raspberry.I2CDevice')\n    def test_read_temperature(self, mock_i2c):\n        \"\"\"Test temperature reading\"\"\"\n        # Setup mock\n        mock_device = Mock()\n        mock_device.read_byte.side_effect = [0x80, 0x00, 0x00]\n        mock_i2c.return_value = mock_device\n\n        # Test\n        sensor = TemperatureSensor()\n        temp = sensor.read_temperature()\n\n        # Assert\n        assert isinstance(temp, float)\n        assert -40 &lt;= temp &lt;= 85  # Valid temperature range\n</code></pre>"},{"location":"packages/elims-raspberry/#best-practices","title":"Best Practices","text":"<ol> <li>Error Handling: Always handle hardware errors gracefully</li> <li>Resource Cleanup: Use context managers or cleanup methods</li> <li>Power Management: Consider power consumption on battery</li> <li>Network Resilience: Handle network disconnections</li> <li>Data Buffering: Buffer data locally before sending</li> <li>Security: Secure MQTT connections with TLS</li> <li>Logging: Log all errors and important events</li> <li>Testing: Use mocks for hardware-dependent tests</li> </ol>"},{"location":"packages/elims-raspberry/#troubleshooting","title":"Troubleshooting","text":""},{"location":"packages/elims-raspberry/#common-issues","title":"Common Issues","text":"<ol> <li>Permission Denied on GPIO/I2C</li> </ol> <pre><code>sudo usermod -a -G gpio,i2c,spi $USER\nsudo reboot\n</code></pre> <ol> <li>I2C Device Not Found</li> </ol> <pre><code># Check I2C is enabled\nls /dev/i2c-*\n\n# Scan for devices\ni2cdetect -y 1\n</code></pre> <ol> <li>Serial Port Access Denied</li> </ol> <pre><code>sudo usermod -a -G dialout $USER\nsudo reboot\n</code></pre> <ol> <li> <p>MQTT Connection Failed</p> </li> <li> <p>Check network connectivity</p> </li> <li>Verify broker address and port</li> <li>Check firewall rules</li> <li>Verify credentials</li> </ol>"},{"location":"packages/elims-raspberry/#dependencies","title":"Dependencies","text":""},{"location":"packages/elims-raspberry/#core-dependencies","title":"Core Dependencies","text":"<ul> <li><code>pydantic&gt;=2.0.0</code>: Configuration management</li> <li><code>pydantic-settings&gt;=2.0.0</code>: Settings from environment</li> </ul>"},{"location":"packages/elims-raspberry/#optional-dependencies","title":"Optional Dependencies","text":"<ul> <li><code>RPi.GPIO</code>: GPIO control (hardware-specific)</li> <li><code>smbus2</code>: I2C communication</li> <li><code>pyserial</code>: Serial communication</li> <li><code>paho-mqtt</code>: MQTT client</li> </ul>"},{"location":"packages/elims-raspberry/#development-dependencies","title":"Development Dependencies","text":"<ul> <li><code>pytest&gt;=7.4.0</code>: Testing</li> <li><code>pytest-cov&gt;=4.1.0</code>: Coverage</li> <li><code>ruff&gt;=0.1.0</code>: Linting</li> <li><code>mypy&gt;=1.5.0</code>: Type checking</li> </ul>"},{"location":"packages/elims-raspberry/#license","title":"License","text":"<p>MIT License - see LICENSE file for details</p>"},{"location":"packages/elims-raspberry/#related-documentation","title":"Related Documentation","text":"<ul> <li>Backend Documentation</li> <li>ELIMS Common Package</li> <li>Workflows Documentation</li> </ul>"},{"location":"workflows/","title":"CI/CD Overview","text":""},{"location":"workflows/#cicd-setup-for-elims","title":"CI/CD Setup for ELIMS","text":"<p>This document explains the CI/CD workflows configured for the ELIMS project.</p>"},{"location":"workflows/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Workflows Overview</li> <li>Required Secrets</li> <li>Workflow Details</li> <li>Setting Up Deployment</li> <li>Badges</li> </ul>"},{"location":"workflows/#workflows-overview","title":"Workflows Overview","text":""},{"location":"workflows/#test-lint-workflows-run-on-pr-and-push","title":"Test &amp; Lint Workflows (Run on PR and Push)","text":"<ol> <li> <p>Test Backend (test-backend.yml)</p> </li> <li> <p>Runs on: Push to main/master, Pull Requests</p> </li> <li>Python 3.13 + uv</li> <li>Lints with mypy, ruff</li> <li>Runs pytest with coverage</li> <li> <p>Uploads coverage to Smokeshow</p> </li> <li> <p>Test Frontend (Playwright) (test-frontend.yml)</p> </li> <li> <p>Runs on: Push to main/master, Pull Requests</p> </li> <li>Sharded tests (4 parallel runners)</li> <li>E2E tests with Playwright</li> <li>Uses MariaDB and Redis services</li> <li> <p>Merges test reports</p> </li> <li> <p>Lint Backend (lint-backend.yml)</p> </li> <li> <p>Runs on: Push to main/master, Pull Requests</p> </li> <li> <p>Checks code quality with mypy, ruff</p> </li> <li> <p>Lint Frontend (lint-frontend.yml)</p> </li> <li> <p>Runs on: Push to main/master, Pull Requests</p> </li> <li> <p>Checks code quality with Biome</p> </li> <li> <p>Test Docker Compose (test-docker-compose.yml)</p> </li> <li> <p>Runs on: Push to main/master, Pull Requests</p> </li> <li>Tests full stack deployment</li> <li> <p>Verifies all services start correctly</p> </li> <li> <p>Pre-commit (pre-commit.yml)</p> </li> <li> <p>Runs on: Pull Requests</p> </li> <li>Validates pre-commit hooks</li> </ol>"},{"location":"workflows/#deployment-workflows","title":"Deployment Workflows","text":"<ol> <li> <p>Deploy to Staging (deploy-staging.yml)</p> </li> <li> <p>Runs on: Push to main/master branch</p> </li> <li>Requires: Self-hosted runner with 'staging' label</li> <li> <p>Environment: staging</p> </li> <li> <p>Deploy to Production (deploy-production.yml)</p> </li> <li> <p>Runs on: Release published</p> </li> <li>Requires: Self-hosted runner with 'production' label</li> <li>Environment: production</li> </ol>"},{"location":"workflows/#automation-workflows","title":"Automation Workflows","text":"<ol> <li> <p>Issue Manager (issue-manager.yml)</p> </li> <li> <p>Automatically manages stale issues</p> </li> <li>Closes answered issues after 10 days</li> <li> <p>Closes waiting issues after 30 days</p> </li> <li> <p>Labeler (labeler.yml)</p> </li> <li> <p>Automatically labels PRs based on changed files</p> </li> <li> <p>Configuration in labeler.yml</p> </li> <li> <p>Latest Changes (latest-changes.yml)</p> </li> <li> <p>Automatically updates release notes</p> </li> <li> <p>Runs when PRs are merged</p> </li> <li> <p>Add to Project (add-to-project.yml)</p> </li> <li> <p>Automatically adds issues and PRs to GitHub Projects</p> </li> <li> <p>Deploy Documentation (deploy-docs.yml)</p> </li> <li> <p>Deploys versioned docs to GitHub Pages</p> </li> <li>Auto-deploys on push to main (dev/latest)</li> <li>Auto-deploys on release (stable)</li> </ol>"},{"location":"workflows/#required-secrets","title":"Required Secrets","text":"<p>Configure these secrets in your GitHub repository settings (<code>Settings &gt; Secrets and variables &gt; Actions</code>):</p>"},{"location":"workflows/#database-secrets","title":"Database Secrets","text":"<ul> <li><code>MARIADB_ROOT_PASSWORD</code> - MariaDB root password</li> <li><code>MARIADB_DATABASE</code> - Database name (e.g., <code>elims</code>)</li> <li><code>MARIADB_USER</code> - Database user (e.g., <code>elims</code>)</li> <li><code>MARIADB_PASSWORD</code> - Database user password</li> </ul>"},{"location":"workflows/#redis-secrets","title":"Redis Secrets","text":"<ul> <li><code>REDIS_PASSWORD</code> - Redis password</li> </ul>"},{"location":"workflows/#mqtt-secrets","title":"MQTT Secrets","text":"<ul> <li><code>MQTT_USERNAME</code> - MQTT broker username</li> <li><code>MQTT_PASSWORD</code> - MQTT broker password</li> </ul>"},{"location":"workflows/#backend-secrets","title":"Backend Secrets","text":"<ul> <li><code>BACKEND_SECRET_KEY</code> - Secret key for JWT tokens (generate with: <code>openssl rand -hex 32</code>)</li> <li><code>FIRST_SUPERUSER</code> - Admin email address</li> <li><code>FIRST_SUPERUSER_PASSWORD</code> - Admin password</li> </ul>"},{"location":"workflows/#grafana-secrets","title":"Grafana Secrets","text":"<ul> <li><code>GRAFANA_ADMIN_USER</code> - Grafana admin username</li> <li><code>GRAFANA_ADMIN_PASSWORD</code> - Grafana admin password</li> </ul>"},{"location":"workflows/#deployment-secrets","title":"Deployment Secrets","text":"<ul> <li><code>DOMAIN_STAGING</code> - Staging domain (e.g., <code>staging.example.com</code>)</li> <li><code>DOMAIN_PRODUCTION</code> - Production domain (e.g., <code>example.com</code>)</li> <li><code>STACK_NAME_STAGING</code> - Docker Compose stack name for staging (e.g., <code>elims-staging</code>)</li> <li><code>STACK_NAME_PRODUCTION</code> - Docker Compose stack name for production (e.g., <code>elims-prod</code>)</li> </ul>"},{"location":"workflows/#optional-secrets","title":"Optional Secrets","text":"<ul> <li><code>LATEST_CHANGES</code> - GitHub personal access token for automatic release notes</li> <li><code>SMOKESHOW_AUTH_KEY</code> - Smokeshow key for coverage reports (Get one here)</li> </ul>"},{"location":"workflows/#workflow-details","title":"\ud83d\udcda Workflow Details","text":""},{"location":"workflows/#test-backend","title":"Test Backend","text":"<p>Purpose: Ensures backend code quality and test coverage</p> <p>Steps:</p> <ol> <li>Checkout code</li> <li>Setup Python 3.13 and uv</li> <li>Install dependencies</li> <li>Run linting (mypy, ruff)</li> <li>Run tests with coverage</li> <li>Upload coverage report to Smokeshow</li> </ol> <p>Local equivalent:</p> <pre><code>cd backend\nuv sync\nuv run mypy app\nuv run ruff check app\nuv run ruff format app --check\nuv run coverage run -m pytest tests/\nuv run coverage report\n</code></pre>"},{"location":"workflows/#test-frontend-playwright","title":"Test Frontend (Playwright)","text":"<p>Purpose: Runs end-to-end tests for the frontend</p> <p>Features:</p> <ul> <li>Sharded tests: Runs tests in parallel across 4 workers for faster execution</li> <li>Service containers: Automatically starts MariaDB and Redis</li> <li>Report merging: Combines results from all shards</li> </ul> <p>Local equivalent:</p> <pre><code>docker compose up -d mariadb redis backend\ncd frontend\nbun install\nbunx playwright install chromium --with-deps\nbunx playwright test\n</code></pre>"},{"location":"workflows/#test-docker-compose","title":"Test Docker Compose","text":"<p>Purpose: Validates that the full stack can be deployed successfully</p> <p>Steps:</p> <ol> <li>Creates .env file with test configuration</li> <li>Builds all Docker images</li> <li>Starts all services</li> <li>Waits for services to be healthy</li> <li>Checks backend and frontend health endpoints</li> <li>Shows logs if anything fails</li> </ol>"},{"location":"workflows/#deployment-workflows_1","title":"Deployment Workflows","text":"<p>Prerequisites:</p> <ol> <li>Set up a self-hosted GitHub Actions runner on your server</li> <li>Configure the runner with appropriate labels (<code>staging</code> or <code>production</code>)</li> <li>Ensure the runner has Docker installed</li> <li>Configure all required secrets</li> </ol> <p>Staging Deployment:</p> <ul> <li>Triggers on every push to main/master</li> <li>Good for testing changes before production</li> <li>URL: <code>https://dashboard.staging.{DOMAIN_STAGING}</code></li> </ul> <p>Production Deployment:</p> <ul> <li>Triggers when you publish a GitHub release</li> <li>URL: <code>https://dashboard.{DOMAIN_PRODUCTION}</code></li> </ul>"},{"location":"workflows/#setting-up-deployment","title":"\ud83d\ude80 Setting Up Deployment","text":""},{"location":"workflows/#step-1-install-github-actions-runner","title":"Step 1: Install GitHub Actions Runner","text":"<p>On your server:</p> <pre><code># Create a user for GitHub Actions\nsudo adduser github\n\n# Add Docker permissions\nsudo usermod -aG docker github\n\n# Switch to github user\nsudo su - github\n\n# Follow GitHub's instructions to install the runner\n# Settings &gt; Actions &gt; Runners &gt; New self-hosted runner\n</code></pre>"},{"location":"workflows/#step-2-install-runner-as-a-service","title":"Step 2: Install Runner as a Service","text":"<pre><code># Exit github user\nexit\n\n# Become root\nsudo su\n\n# Go to runner directory\ncd /home/github/actions-runner\n\n# Install service\n./svc.sh install github\n\n# Start service\n./svc.sh start\n\n# Check status\n./svc.sh status\n</code></pre>"},{"location":"workflows/#step-3-configure-secrets","title":"Step 3: Configure Secrets","text":"<p>Go to your repository <code>Settings &gt; Secrets and variables &gt; Actions</code> and add all required secrets listed above.</p>"},{"location":"workflows/#step-4-deploy","title":"Step 4: Deploy","text":"<p>Staging: Push to main/master branch</p> <pre><code>git push origin main\n</code></pre> <p>Production: Create and publish a release</p> <pre><code># Create a tag\ngit tag -a v1.0.0 -m \"Release v1.0.0\"\ngit push origin v1.0.0\n\n# Then publish the release on GitHub\n</code></pre>"},{"location":"workflows/#badges","title":"\ud83d\udcca Badges","text":"<p>Add these badges to your README:</p> <pre><code>[![Test Backend](https://github.com/YOUR_USERNAME/elims2/workflows/Test%20Backend/badge.svg)](https://github.com/YOUR_USERNAME/elims2/actions?query=workflow%3A%22Test+Backend%22)\n[![Test Frontend](https://github.com/YOUR_USERNAME/elims2/workflows/Test%20Frontend%20(Playwright)/badge.svg)](https://github.com/YOUR_USERNAME/elims2/actions?query=workflow%3A%22Test+Frontend+(Playwright)%22)\n[![Test Docker Compose](https://github.com/YOUR_USERNAME/elims2/workflows/Test%20Docker%20Compose/badge.svg)](https://github.com/YOUR_USERNAME/elims2/actions?query=workflow%3A%22Test+Docker+Compose%22)\n</code></pre> <p>For coverage badge (requires Smokeshow setup):</p> <pre><code>[![Coverage](https://coverage-badge.samuelcolvin.workers.dev/redirect/YOUR_USERNAME/elims2)](https://coverage-badge.samuelcolvin.workers.dev/YOUR_USERNAME/elims2.svg)\n</code></pre>"},{"location":"workflows/#customization","title":"\ud83d\udd27 Customization","text":""},{"location":"workflows/#adjusting-test-shards","title":"Adjusting Test Shards","text":"<p>In test-frontend.yml, modify the matrix:</p> <pre><code>strategy:\n  matrix:\n    shardIndex: [1, 2, 3, 4]  # Increase for more parallelization\n    shardTotal: [4]           # Must match number of shards\n</code></pre>"},{"location":"workflows/#adding-more-environments","title":"Adding More Environments","text":"<p>Copy <code>deploy-staging.yml</code> and modify:</p> <ul> <li>Workflow name</li> <li>Trigger conditions</li> <li>Secrets used</li> <li>Runner labels</li> </ul>"},{"location":"workflows/#modifying-auto-labeling","title":"Modifying Auto-labeling","text":"<p>Edit .github/labeler.yml to change which files trigger which labels.</p>"},{"location":"workflows/#troubleshooting","title":"\ud83d\udc1b Troubleshooting","text":""},{"location":"workflows/#tests-failing-locally-but-passing-in-ci-or-vice-versa","title":"Tests failing locally but passing in CI (or vice versa)","text":"<ul> <li>Check Python/Node versions match</li> <li>Verify all dependencies are installed</li> <li>Check environment variables</li> </ul>"},{"location":"workflows/#deployment-fails","title":"Deployment fails","text":"<ul> <li>Verify secrets are set correctly</li> <li>Check runner has Docker installed</li> <li>Ensure runner has proper permissions</li> <li>Check server has enough disk space</li> </ul>"},{"location":"workflows/#coverage-not-uploading","title":"Coverage not uploading","text":"<ul> <li>Ensure <code>SMOKESHOW_AUTH_KEY</code> secret is set</li> <li>Check that tests actually ran</li> <li>Verify coverage files were generated</li> </ul>"},{"location":"workflows/#further-reading","title":"\ud83d\udcd6 Further Reading","text":"<ul> <li>GitHub Actions Documentation</li> <li>Playwright Documentation</li> <li>Smokeshow Documentation</li> <li>Self-hosted Runners</li> </ul>"},{"location":"workflows/automation/","title":"Automation","text":""},{"location":"workflows/automation/#automation-workflows","title":"Automation Workflows","text":""},{"location":"workflows/automation/#overview","title":"Overview","text":"<p>ELIMS includes several automation workflows to streamline project management, maintain code quality, and keep documentation up-to-date.</p>"},{"location":"workflows/automation/#issue-manager","title":"Issue Manager","text":""},{"location":"workflows/automation/#workflow-file","title":"Workflow File","text":"<p><code>issue-manager.yml</code></p>"},{"location":"workflows/automation/#purpose","title":"Purpose","text":"<p>Automatically manages stale issues to keep the issue tracker clean and organized.</p>"},{"location":"workflows/automation/#trigger","title":"Trigger","text":"<p>Runs on a schedule: Daily at 00:00 UTC</p> <pre><code>schedule:\n  - cron: '0 0 * * *'\n</code></pre>"},{"location":"workflows/automation/#features","title":"Features","text":"<ol> <li> <p>Stale Issue Detection</p> </li> <li> <p>Marks issues as stale after period of inactivity</p> </li> <li>Adds \"stale\" label</li> <li> <p>Posts comment notifying about staleness</p> </li> <li> <p>Auto-close Stale Issues</p> </li> <li> <p>Closes issues that remain stale after additional time</p> </li> <li> <p>Configurable grace period</p> </li> <li> <p>Exemptions</p> </li> <li> <p>Issues with specific labels (e.g., \"pinned\", \"security\") are exempt</p> </li> <li>Pull requests can be handled separately</li> </ol>"},{"location":"workflows/automation/#configuration","title":"Configuration","text":"<p>Customize in the workflow file:</p> <pre><code>stale-issue-message: 'This issue has been automatically marked as stale...'\ndays-before-stale: 60  # Days before marking as stale\ndays-before-close: 7   # Days after stale before closing\nexempt-issue-labels: 'pinned,security,help wanted'\n</code></pre>"},{"location":"workflows/automation/#best-practices","title":"Best Practices","text":"<ul> <li>Respond to issues before they become stale</li> <li>Use exempt labels for long-term issues</li> <li>Review stale issues before they auto-close</li> </ul>"},{"location":"workflows/automation/#labeler","title":"Labeler","text":""},{"location":"workflows/automation/#workflow-file_1","title":"Workflow File","text":"<p><code>labeler.yml</code></p>"},{"location":"workflows/automation/#purpose_1","title":"Purpose","text":"<p>Automatically applies labels to pull requests based on changed files.</p>"},{"location":"workflows/automation/#trigger_1","title":"Trigger","text":"<p>Runs on pull request events:</p> <ul> <li>opened</li> <li>synchronize (when commits are added)</li> </ul>"},{"location":"workflows/automation/#configuration-file","title":"Configuration File","text":"<p>Labels are configured in <code>.github/labeler.yml</code>:</p> <pre><code>backend:\n  - backend/**/*\n  - packages/elims-common/**/*\n\nfrontend:\n  - frontend/**/*\n\ndocs:\n  - docs/**/*\n  - '*.md'\n  - mkdocs.yml\n\ndocker:\n  - compose.yml\n  - compose.*.yml\n  - '**/Dockerfile'\n\nci:\n  - .github/workflows/**\n\nconfig:\n  - config/**/*\n  - .env.example\n\ntests:\n  - backend/tests/**\n  - frontend/tests/**\n  - '**/test_*.py'\n  - '**/*.spec.ts'\n</code></pre>"},{"location":"workflows/automation/#labels-applied","title":"Labels Applied","text":"<ul> <li><code>backend</code>: Changes to backend code</li> <li><code>frontend</code>: Changes to frontend code</li> <li><code>docs</code>: Documentation updates</li> <li><code>docker</code>: Docker configuration changes</li> <li><code>ci</code>: CI/CD workflow changes</li> <li><code>config</code>: Configuration file changes</li> <li><code>tests</code>: Test file changes</li> </ul>"},{"location":"workflows/automation/#benefits","title":"Benefits","text":"<ul> <li>Easier filtering and searching of PRs</li> <li>Automatic categorization</li> <li>Better organization</li> <li>Helps with release notes generation</li> </ul>"},{"location":"workflows/automation/#latest-changes","title":"Latest Changes","text":""},{"location":"workflows/automation/#workflow-file_2","title":"Workflow File","text":"<p><code>latest-changes.yml</code></p>"},{"location":"workflows/automation/#purpose_2","title":"Purpose","text":"<p>Automatically updates release notes when pull requests are merged.</p>"},{"location":"workflows/automation/#trigger_2","title":"Trigger","text":"<p>Runs when pull requests are closed:</p> <ul> <li>Only if PR was merged (not just closed)</li> <li>Checks <code>main</code> or <code>master</code> branch</li> </ul>"},{"location":"workflows/automation/#features_1","title":"Features","text":"<ol> <li> <p>Release Notes Generation</p> </li> <li> <p>Extracts PR title and number</p> </li> <li>Categorizes by labels</li> <li> <p>Updates <code>docs/release-notes.md</code></p> </li> <li> <p>Template-based</p> </li> <li> <p>Uses <code>.github/latest-changes-template.jinja2</code></p> </li> <li> <p>Customizable format</p> </li> <li> <p>Categorization</p> </li> <li> <p>Features: PRs labeled with <code>feature</code></p> </li> <li>Bug Fixes: PRs labeled with <code>bug</code></li> <li>Documentation: PRs labeled with <code>docs</code></li> <li>Infrastructure: PRs labeled with <code>docker</code>, <code>ci</code>, <code>config</code></li> </ol>"},{"location":"workflows/automation/#template-file","title":"Template File","text":"<p><code>.github/latest-changes-template.jinja2</code></p> <pre><code># Release Notes\n\n## Latest Changes\n\n{% for category, changes in categories.items() %}\n### {{ category }}\n\n{% for change in changes %}\n* {{ change.title }} (#{{ change.number }})\n{% endfor %}\n\n{% endfor %}\n</code></pre>"},{"location":"workflows/automation/#release-note-format","title":"Release Note Format","text":"<p>Example output:</p> <pre><code>## Latest Changes\n\n### Features\n\n* Add user authentication (#123)\n* Implement instrument dashboard (#124)\n\n### Bug Fixes\n\n* Fix database connection timeout (#125)\n* Resolve memory leak in MQTT handler (#126)\n\n### Documentation\n\n* Update installation guide (#127)\n* Add API examples (#128)\n</code></pre>"},{"location":"workflows/automation/#configuration_1","title":"Configuration","text":"<p>Customize categories in the workflow file:</p> <pre><code>categories:\n  - title: Features\n    labels:\n      - feature\n      - enhancement\n  - title: Bug Fixes\n    labels:\n      - bug\n      - fix\n  - title: Documentation\n    labels:\n      - docs\n</code></pre>"},{"location":"workflows/automation/#add-to-project","title":"Add to Project","text":""},{"location":"workflows/automation/#workflow-file_3","title":"Workflow File","text":"<p><code>add-to-project.yml</code></p>"},{"location":"workflows/automation/#purpose_3","title":"Purpose","text":"<p>Automatically adds new issues and pull requests to GitHub Project boards.</p>"},{"location":"workflows/automation/#trigger_3","title":"Trigger","text":"<p>Runs when:</p> <ul> <li>New issues are opened</li> <li>New pull requests are opened</li> </ul>"},{"location":"workflows/automation/#configuration_2","title":"Configuration","text":"<p>Set up project:</p> <ol> <li>Create a GitHub Project</li> <li>Get project number from URL</li> <li>Configure in workflow:</li> </ol> <pre><code>project-url: https://github.com/users/FabienMeyer/projects/1\n</code></pre>"},{"location":"workflows/automation/#features_2","title":"Features","text":"<ul> <li>Automatic addition to project board</li> <li>No manual triage needed</li> <li>Ensures nothing is missed</li> <li>Streamlines project management</li> </ul>"},{"location":"workflows/automation/#setting-up","title":"Setting Up","text":"<ol> <li> <p>Create GitHub Personal Access Token</p> </li> <li> <p>Go to: Settings &gt; Developer settings &gt; Personal access tokens</p> </li> <li>Generate token with <code>project</code> scope</li> <li> <p>Add as repository secret: <code>PROJECT_TOKEN</code></p> </li> <li> <p>Configure Project URL</p> </li> <li> <p>Update workflow with your project URL</p> </li> <li> <p>Optional: Configure Column</p> </li> <li> <p>Specify which column to add items to</p> </li> <li>Default: backlog/triage column</li> </ol>"},{"location":"workflows/automation/#lint-workflows","title":"Lint Workflows","text":""},{"location":"workflows/automation/#backend-linting","title":"Backend Linting","text":"<p>File: <code>lint-backend.yml</code></p> <p>Purpose: Run code quality checks on backend code</p> <p>Triggers: Push to main, pull requests</p> <p>Checks:</p> <ul> <li><code>mypy</code>: Type checking</li> <li><code>ruff check</code>: Linting</li> <li><code>ruff format --check</code>: Format checking</li> </ul>"},{"location":"workflows/automation/#frontend-linting","title":"Frontend Linting","text":"<p>File: <code>lint-frontend.yml</code></p> <p>Purpose: Run code quality checks on frontend code</p> <p>Triggers: Push to main, pull requests</p> <p>Checks:</p> <ul> <li>Biome linting</li> <li>Code formatting</li> <li>Import sorting</li> </ul>"},{"location":"workflows/automation/#pre-commit-workflow","title":"Pre-commit Workflow","text":""},{"location":"workflows/automation/#workflow-file_4","title":"Workflow File","text":"<p><code>pre-commit.yml</code></p>"},{"location":"workflows/automation/#purpose_4","title":"Purpose","text":"<p>Validates pre-commit hooks in CI to ensure they pass for all contributors.</p>"},{"location":"workflows/automation/#trigger_4","title":"Trigger","text":"<p>Runs on pull requests</p>"},{"location":"workflows/automation/#checks","title":"Checks","text":"<ul> <li>Runs all pre-commit hooks defined in <code>.pre-commit-config.yaml</code></li> <li>Ensures hooks pass in CI environment</li> <li>Catches issues before merge</li> </ul>"},{"location":"workflows/automation/#pre-commit-hooks","title":"Pre-commit Hooks","text":"<p>Configured in <code>.pre-commit-config.yaml</code>:</p> <pre><code>repos:\n  - repo: https://github.com/astral-sh/ruff-pre-commit\n    rev: v0.8.4\n    hooks:\n      - id: ruff\n        args: [--fix]\n      - id: ruff-format\n\n  - repo: https://github.com/pre-commit/mirrors-mypy\n    rev: v1.13.0\n    hooks:\n      - id: mypy\n        args: [--strict]\n\n  - repo: https://github.com/biomejs/pre-commit\n    rev: v0.10.1\n    hooks:\n      - id: biome-check\n        args: [--write]\n</code></pre>"},{"location":"workflows/automation/#test-docker-compose-workflow","title":"Test Docker Compose Workflow","text":""},{"location":"workflows/automation/#workflow-file_5","title":"Workflow File","text":"<p><code>test-docker-compose.yml</code></p>"},{"location":"workflows/automation/#purpose_5","title":"Purpose","text":"<p>Tests the complete Docker Compose stack to ensure all services start correctly.</p>"},{"location":"workflows/automation/#trigger_5","title":"Trigger","text":"<ul> <li>Push to main/master</li> <li>Pull requests</li> <li>Changes to compose files</li> </ul>"},{"location":"workflows/automation/#steps","title":"Steps","text":"<ol> <li>Checkout Code</li> <li>Create Test .env File</li> <li>Uses test credentials</li> <li>Configures all services</li> <li>Build Images</li> <li>Builds all Docker images</li> <li>Start Stack</li> <li>Brings up all services</li> <li>Wait for Services</li> <li>Allows time for initialization</li> <li>Test Services</li> <li>Checks all services are running</li> <li>Tests health endpoints</li> <li>Cleanup</li> <li>Stops and removes containers</li> <li>Cleans up volumes</li> </ol>"},{"location":"workflows/automation/#services-tested","title":"Services Tested","text":"<ul> <li>Backend API</li> <li>Frontend</li> <li>MariaDB</li> <li>Redis</li> <li>Mosquitto MQTT</li> <li>Grafana</li> <li>Loki</li> <li>Alloy</li> <li>Traefik</li> </ul>"},{"location":"workflows/automation/#health-checks","title":"Health Checks","text":"<p>Verifies:</p> <ul> <li>All containers are running</li> <li>Services are responding</li> <li>Inter-service connectivity</li> <li>Port bindings</li> </ul>"},{"location":"workflows/automation/#documentation-deployment","title":"Documentation Deployment","text":""},{"location":"workflows/automation/#workflow-file_6","title":"Workflow File","text":"<p><code>deploy-docs.yml</code></p>"},{"location":"workflows/automation/#purpose_6","title":"Purpose","text":"<p>Deploys versioned documentation to GitHub Pages using MkDocs and mike.</p>"},{"location":"workflows/automation/#triggers","title":"Triggers","text":"<ol> <li>Push to main: Deploys as <code>dev</code> and <code>latest</code></li> <li>Release published: Deploys as version tag and <code>stable</code></li> <li>Manual dispatch: Allows manual deployment</li> </ol>"},{"location":"workflows/automation/#features_3","title":"Features","text":"<ul> <li>Version management with mike</li> <li>Automatic dev/latest updates</li> <li>Stable version on releases</li> <li>Version selector in docs</li> </ul>"},{"location":"workflows/automation/#configuration_3","title":"Configuration","text":"<p>See Documentation Deployment Guide for details.</p>"},{"location":"workflows/automation/#workflow-dependencies","title":"Workflow Dependencies","text":""},{"location":"workflows/automation/#workflow-execution-order","title":"Workflow Execution Order","text":"<pre><code>graph TD\n    A[Push to Main] --&gt; B[Test Backend]\n    A --&gt; C[Test Frontend]\n    A --&gt; D[Lint Backend]\n    A --&gt; E[Lint Frontend]\n    A --&gt; F[Test Docker Compose]\n    B --&gt; G[Deploy to Staging]\n    C --&gt; G\n    D --&gt; G\n    E --&gt; G\n    F --&gt; G\n    G --&gt; H[Health Check]\n\n    I[Create Release] --&gt; J[Deploy to Production]\n    J --&gt; K[Health Check]\n\n    L[PR Merged] --&gt; M[Latest Changes]\n    M --&gt; N[Update Release Notes]\n\n    O[PR Opened] --&gt; P[Labeler]\n    O --&gt; Q[Add to Project]</code></pre>"},{"location":"workflows/automation/#best-practices_1","title":"Best Practices","text":""},{"location":"workflows/automation/#for-all-workflows","title":"For All Workflows","text":"<ol> <li> <p>Keep Workflows Fast</p> </li> <li> <p>Use caching</p> </li> <li>Parallelize when possible</li> <li> <p>Optimize build steps</p> </li> <li> <p>Secure Secrets</p> </li> <li> <p>Never log secrets</p> </li> <li>Use GitHub secrets</li> <li> <p>Rotate regularly</p> </li> <li> <p>Clear Names</p> </li> <li> <p>Use descriptive workflow names</p> </li> <li>Clear step descriptions</li> <li> <p>Meaningful artifact names</p> </li> <li> <p>Error Handling</p> </li> <li> <p>Fail fast on errors</p> </li> <li>Provide clear error messages</li> <li> <p>Upload logs on failure</p> </li> <li> <p>Documentation</p> </li> <li> <p>Document required secrets</p> </li> <li>Explain triggers</li> <li>Provide troubleshooting guides</li> </ol>"},{"location":"workflows/automation/#for-automation-workflows","title":"For Automation Workflows","text":"<ol> <li> <p>Test Locally</p> </li> <li> <p>Test pre-commit hooks locally</p> </li> <li>Verify labeler rules</li> <li> <p>Check release note generation</p> </li> <li> <p>Monitor Activity</p> </li> <li> <p>Review automated actions</p> </li> <li>Adjust timing if needed</li> <li> <p>Check for false positives</p> </li> <li> <p>Communicate Changes</p> </li> <li> <p>Notify team of automation</p> </li> <li>Document expected behavior</li> <li>Provide opt-out mechanisms</li> </ol>"},{"location":"workflows/automation/#troubleshooting","title":"Troubleshooting","text":""},{"location":"workflows/automation/#workflows-not-triggering","title":"Workflows Not Triggering","text":"<ol> <li>Check workflow syntax</li> <li>Verify branch names</li> <li>Check repository permissions</li> <li>Review workflow filters</li> </ol>"},{"location":"workflows/automation/#permission-errors","title":"Permission Errors","text":"<ol> <li>Check <code>GITHUB_TOKEN</code> permissions</li> <li>Verify repository settings</li> <li>Update workflow permissions section</li> </ol>"},{"location":"workflows/automation/#failed-automation","title":"Failed Automation","text":"<ol> <li>Review workflow logs</li> <li>Check configuration files</li> <li>Verify secrets are set</li> <li>Test manually if possible</li> </ol>"},{"location":"workflows/automation/#related-documentation","title":"Related Documentation","text":"<ul> <li>CI/CD Overview</li> <li>Deployment Workflows</li> <li>Test Workflows</li> <li>Documentation Deployment</li> </ul>"},{"location":"workflows/deployment/","title":"Deployment","text":""},{"location":"workflows/deployment/#deployment-workflows","title":"Deployment Workflows","text":""},{"location":"workflows/deployment/#overview","title":"Overview","text":"<p>ELIMS uses two deployment workflows for different environments:</p> <ul> <li>Staging: Automatic deployment on every push to main</li> <li>Production: Manual deployment triggered by GitHub releases</li> </ul> <p>Both workflows use Docker Compose and self-hosted runners.</p>"},{"location":"workflows/deployment/#deploy-to-staging","title":"Deploy to Staging","text":""},{"location":"workflows/deployment/#workflow-file","title":"Workflow File","text":"<p><code>deploy-staging.yml</code></p>"},{"location":"workflows/deployment/#trigger","title":"Trigger","text":"<p>Automatically runs on push to <code>main</code> or <code>master</code> branches.</p>"},{"location":"workflows/deployment/#environment","title":"Environment","text":"<ul> <li>Name: staging</li> <li>URL: <code>https://dashboard.staging.${{ secrets.DOMAIN_STAGING }}</code></li> </ul>"},{"location":"workflows/deployment/#requirements","title":"Requirements","text":"<ul> <li>Self-hosted runner (can be labeled with 'staging')</li> <li>Docker and Docker Compose installed on runner</li> <li>Access to deployment server</li> </ul>"},{"location":"workflows/deployment/#steps","title":"Steps","text":"<ol> <li> <p>Checkout Code</p> </li> <li> <p>Checks out the latest code from the repository</p> </li> <li> <p>Create .env File</p> </li> <li> <p>Generates environment configuration</p> </li> <li>Uses secrets from GitHub repository settings</li> <li> <p>Includes all required variables for services</p> </li> <li> <p>Build and Deploy</p> </li> <li> <p>Builds Docker images: <code>docker compose build</code></p> </li> <li> <p>Starts services: <code>docker compose up -d</code></p> </li> <li> <p>Wait for Services</p> </li> <li> <p>Waits 30 seconds for services to initialize</p> </li> <li> <p>Displays service status</p> </li> <li> <p>Health Check</p> </li> <li> <p>Verifies API is responding</p> </li> <li>Tests: <code>https://api.staging.${{ secrets.DOMAIN_STAGING }}/health</code></li> <li>Fails deployment if health check fails</li> </ol>"},{"location":"workflows/deployment/#required-secrets","title":"Required Secrets","text":"<p>Configure in: <code>Settings &gt; Secrets and variables &gt; Actions &gt; Secrets</code></p>"},{"location":"workflows/deployment/#database-secrets","title":"Database Secrets","text":"<ul> <li><code>MARIADB_ROOT_PASSWORD</code>: MariaDB root password</li> <li><code>MARIADB_DATABASE</code>: Database name (e.g., <code>elims</code>)</li> <li><code>MARIADB_USER</code>: Database user (e.g., <code>elims</code>)</li> <li><code>MARIADB_PASSWORD</code>: Database user password</li> </ul>"},{"location":"workflows/deployment/#redis-secrets","title":"Redis Secrets","text":"<ul> <li><code>REDIS_PASSWORD</code>: Redis authentication password</li> </ul>"},{"location":"workflows/deployment/#mqtt-secrets","title":"MQTT Secrets","text":"<ul> <li><code>MQTT_USERNAME</code>: MQTT broker username</li> <li><code>MQTT_PASSWORD</code>: MQTT broker password</li> </ul>"},{"location":"workflows/deployment/#backend-secrets","title":"Backend Secrets","text":"<ul> <li><code>BACKEND_SECRET_KEY</code>: JWT secret key (generate with <code>openssl rand -hex 32</code>)</li> <li><code>BACKEND_CORS_ORIGINS</code>: Allowed CORS origins</li> </ul>"},{"location":"workflows/deployment/#grafana-secrets","title":"Grafana Secrets","text":"<ul> <li><code>GRAFANA_ADMIN_USER</code>: Grafana admin username</li> <li><code>GRAFANA_ADMIN_PASSWORD</code>: Grafana admin password</li> </ul>"},{"location":"workflows/deployment/#domain-secrets","title":"Domain Secrets","text":"<ul> <li><code>DOMAIN_STAGING</code>: Staging domain (e.g., <code>staging.example.com</code>)</li> <li><code>STACK_NAME_STAGING</code>: Docker stack name (e.g., <code>elims-staging</code>)</li> </ul>"},{"location":"workflows/deployment/#environment-variables-set","title":"Environment Variables Set","text":"<p>The workflow creates a <code>.env</code> file with:</p> <pre><code># Database\nMARIADB_ROOT_PASSWORD=***\nMARIADB_DATABASE=elims\nMARIADB_USER=elims\nMARIADB_PASSWORD=***\nMARIADB_HOST=mariadb\nMARIADB_PORT=3306\n\n# Redis\nREDIS_PASSWORD=***\nREDIS_HOST=redis\nREDIS_PORT=6379\n\n# MQTT\nMQTT_HOST=mosquitto\nMQTT_PORT=8883\nMQTT_USERNAME=***\nMQTT_PASSWORD=***\n\n# Backend\nBACKEND_SECRET_KEY=***\nBACKEND_ALGORITHM=HS256\nBACKEND_ACCESS_TOKEN_EXPIRE_MINUTES=60\nBACKEND_CORS_ORIGINS=https://dashboard.staging.example.com,https://api.staging.example.com\nENVIRONMENT=staging\n\n# Grafana\nGRAFANA_ADMIN_USER=***\nGRAFANA_ADMIN_PASSWORD=***\n\n# Docker\nDOMAIN=staging.example.com\nSTACK_NAME=elims-staging\n</code></pre>"},{"location":"workflows/deployment/#deploy-to-production","title":"Deploy to Production","text":""},{"location":"workflows/deployment/#workflow-file_1","title":"Workflow File","text":"<p><code>deploy-production.yml</code></p>"},{"location":"workflows/deployment/#trigger_1","title":"Trigger","text":"<p>Manually triggered when a GitHub Release is published.</p>"},{"location":"workflows/deployment/#environment_1","title":"Environment","text":"<ul> <li>Name: production</li> <li>URL: <code>https://dashboard.${{ secrets.DOMAIN_PRODUCTION }}</code></li> </ul>"},{"location":"workflows/deployment/#requirements_1","title":"Requirements","text":"<ul> <li>Self-hosted runner (can be labeled with 'production')</li> <li>Docker and Docker Compose installed on runner</li> <li>Access to production server</li> <li>GitHub Release created</li> </ul>"},{"location":"workflows/deployment/#steps_1","title":"Steps","text":"<p>Same as staging deployment, but with production-specific configuration:</p> <ol> <li>Checkout Code</li> <li>Create .env File (with production secrets)</li> <li>Build and Deploy</li> <li>Wait for Services</li> <li>Health Check</li> </ol>"},{"location":"workflows/deployment/#required-secrets_1","title":"Required Secrets","text":"<p>Same categories as staging, but with <code>-production</code> suffixes:</p> <ul> <li><code>MARIADB_ROOT_PASSWORD</code></li> <li><code>MARIADB_DATABASE</code></li> <li><code>MARIADB_USER</code></li> <li><code>MARIADB_PASSWORD</code></li> <li><code>REDIS_PASSWORD</code></li> <li><code>MQTT_USERNAME</code></li> <li><code>MQTT_PASSWORD</code></li> <li><code>BACKEND_SECRET_KEY</code></li> <li><code>GRAFANA_ADMIN_USER</code></li> <li><code>GRAFANA_ADMIN_PASSWORD</code></li> <li><code>DOMAIN_PRODUCTION</code></li> <li><code>STACK_NAME_PRODUCTION</code></li> </ul>"},{"location":"workflows/deployment/#environment-variables-set_1","title":"Environment Variables Set","text":"<p>Similar to staging, but:</p> <ul> <li><code>ENVIRONMENT=production</code></li> <li>Uses production domain</li> <li>May have stricter CORS policies</li> </ul>"},{"location":"workflows/deployment/#self-hosted-runners","title":"Self-Hosted Runners","text":""},{"location":"workflows/deployment/#setup","title":"Setup","text":"<ol> <li>Go to: <code>Settings &gt; Actions &gt; Runners &gt; New self-hosted runner</code></li> <li>Follow instructions for your OS</li> <li>Add labels (optional): <code>staging</code>, <code>production</code></li> </ol>"},{"location":"workflows/deployment/#requirements_2","title":"Requirements","text":"<ul> <li>Docker: Version 20.10 or later</li> <li>Docker Compose: Version 2.0 or later</li> <li>Network Access: Ability to pull images and access GitHub</li> <li>Disk Space: Sufficient for Docker images and containers</li> <li>Permissions: User must be in docker group</li> </ul>"},{"location":"workflows/deployment/#installation-example-ubuntu","title":"Installation Example (Ubuntu)","text":"<pre><code># Install Docker\ncurl -fsSL https://get.docker.com -o get-docker.sh\nsudo sh get-docker.sh\nsudo usermod -aG docker $USER\n\n# Install Docker Compose\nsudo apt-get update\nsudo apt-get install docker-compose-plugin\n\n# Download and configure runner\nmkdir actions-runner &amp;&amp; cd actions-runner\ncurl -o actions-runner-linux-x64-2.311.0.tar.gz -L https://github.com/actions/runner/releases/download/v2.311.0/actions-runner-linux-x64-2.311.0.tar.gz\ntar xzf ./actions-runner-linux-x64-2.311.0.tar.gz\n./config.sh --url https://github.com/FabienMeyer/elims --token YOUR_TOKEN\n\n# Start runner as service\nsudo ./svc.sh install\nsudo ./svc.sh start\n</code></pre>"},{"location":"workflows/deployment/#deployment-process","title":"Deployment Process","text":""},{"location":"workflows/deployment/#staging-deployment","title":"Staging Deployment","text":"<ol> <li>Developer pushes to <code>main</code> branch</li> <li>Tests run (backend, frontend, lint)</li> <li>If tests pass, deployment workflow triggers</li> <li>Runner builds and deploys to staging</li> <li>Health check verifies deployment</li> <li>Team reviews staging environment</li> </ol>"},{"location":"workflows/deployment/#production-deployment","title":"Production Deployment","text":"<ol> <li>Create a new release on GitHub:</li> <li>Go to: <code>Releases &gt; Create a new release</code></li> <li>Choose a tag (e.g., <code>v1.0.0</code>)</li> <li>Fill in release notes</li> <li>Publish release</li> <li>Deployment workflow triggers automatically</li> <li>Runner builds and deploys to production</li> <li>Health check verifies deployment</li> <li>Monitor production logs and metrics</li> </ol>"},{"location":"workflows/deployment/#health-checks","title":"Health Checks","text":""},{"location":"workflows/deployment/#api-health-endpoint","title":"API Health Endpoint","text":"<p>The workflows check: <code>/health</code></p> <p>Expected response:</p> <pre><code>{\n  \"status\": \"healthy\",\n  \"version\": \"1.0.0\",\n  \"database\": \"connected\",\n  \"redis\": \"connected\",\n  \"mqtt\": \"connected\"\n}\n</code></pre>"},{"location":"workflows/deployment/#troubleshooting-health-check-failures","title":"Troubleshooting Health Check Failures","text":"<ol> <li>Check Service Status</li> </ol> <pre><code>docker compose ps\n</code></pre> <ol> <li>View Service Logs</li> </ol> <pre><code>docker compose logs backend\ndocker compose logs mariadb\ndocker compose logs redis\n</code></pre> <ol> <li>Test Health Endpoint Manually</li> </ol> <pre><code>curl https://api.staging.example.com/health\n</code></pre> <ol> <li>Verify Environment Variables</li> </ol> <pre><code>docker compose config\n</code></pre>"},{"location":"workflows/deployment/#rollback-procedure","title":"Rollback Procedure","text":""},{"location":"workflows/deployment/#staging-rollback","title":"Staging Rollback","text":"<ol> <li>Revert the commit on <code>main</code> branch</li> <li>Push the revert</li> <li>Workflow will automatically deploy previous version</li> </ol>"},{"location":"workflows/deployment/#production-rollback","title":"Production Rollback","text":"<ol> <li>Quick Rollback (using previous images):</li> </ol> <pre><code># On production server\ndocker compose down\ndocker compose up -d\n</code></pre> <ol> <li> <p>Release Rollback:</p> </li> <li> <p>Delete the problematic release</p> </li> <li>Create a new release from previous stable tag</li> <li> <p>Workflow will deploy previous version</p> </li> <li> <p>Manual Rollback:</p> </li> </ol> <pre><code># On production server\ngit checkout v1.0.0  # Previous stable version\ndocker compose build\ndocker compose up -d\n</code></pre>"},{"location":"workflows/deployment/#monitoring-deployments","title":"Monitoring Deployments","text":""},{"location":"workflows/deployment/#grafana-dashboards","title":"Grafana Dashboards","text":"<p>Access observability at: <code>https://grafana.[staging|production].example.com</code></p> <p>Monitor:</p> <ul> <li>Application Logs: Loki dashboard</li> <li>Container Metrics: Docker container stats</li> <li>API Response Times: Application metrics</li> <li>Error Rates: HTTP status codes</li> </ul>"},{"location":"workflows/deployment/#log-access","title":"Log Access","text":"<pre><code># View all logs\ndocker compose logs -f\n\n# View specific service\ndocker compose logs -f backend\n\n# View recent logs\ndocker compose logs --tail=100 backend\n</code></pre>"},{"location":"workflows/deployment/#security-best-practices","title":"Security Best Practices","text":"<ol> <li> <p>Secrets Management</p> </li> <li> <p>Never commit secrets to repository</p> </li> <li>Rotate secrets regularly</li> <li> <p>Use strong, unique passwords</p> </li> <li> <p>HTTPS/TLS</p> </li> <li> <p>Always use HTTPS in production</p> </li> <li>Configure Traefik with Let's Encrypt</li> <li> <p>Redirect HTTP to HTTPS</p> </li> <li> <p>Access Control</p> </li> <li> <p>Limit self-hosted runner access</p> </li> <li>Use environment protection rules</li> <li> <p>Require approvals for production</p> </li> <li> <p>Network Security</p> </li> <li> <p>Use internal Docker networks</p> </li> <li>Expose only necessary ports</li> <li> <p>Configure firewall rules</p> </li> <li> <p>Monitoring</p> </li> <li> <p>Set up alerts for failures</p> </li> <li>Monitor resource usage</li> <li>Track deployment frequency</li> </ol>"},{"location":"workflows/deployment/#troubleshooting","title":"Troubleshooting","text":""},{"location":"workflows/deployment/#deployment-fails","title":"Deployment Fails","text":"<ol> <li> <p>Check Runner Status</p> </li> <li> <p>Verify runner is online and active</p> </li> <li> <p>Check runner logs</p> </li> <li> <p>Check Secrets</p> </li> <li> <p>Verify all required secrets are configured</p> </li> <li> <p>Ensure no typos in secret names</p> </li> <li> <p>Check Docker</p> </li> <li> <p>Verify Docker daemon is running</p> </li> <li>Check disk space: <code>df -h</code></li> <li>Check Docker logs: <code>journalctl -u docker</code></li> </ol>"},{"location":"workflows/deployment/#service-wont-start","title":"Service Won't Start","text":"<ol> <li>Check Logs</li> </ol> <pre><code>docker compose logs service-name\n</code></pre> <ol> <li> <p>Check Dependencies</p> </li> <li> <p>Verify database is ready</p> </li> <li>Check Redis connection</li> <li> <p>Test MQTT broker</p> </li> <li> <p>Check Configuration</p> </li> </ol> <pre><code>docker compose config\n</code></pre>"},{"location":"workflows/deployment/#health-check-fails","title":"Health Check Fails","text":"<ol> <li> <p>Wait Longer</p> </li> <li> <p>Increase wait time in workflow</p> </li> <li> <p>Services may need more time to initialize</p> </li> <li> <p>Check Backend Logs</p> </li> </ol> <pre><code>docker compose logs backend\n</code></pre> <ol> <li>Test Manually</li> </ol> <pre><code>curl http://localhost:8000/health\n</code></pre>"},{"location":"workflows/deployment/#related-workflows","title":"Related Workflows","text":"<ul> <li>Test Backend - Backend tests must pass</li> <li>Test Frontend - Frontend tests must pass</li> <li>Test Docker Compose - Integration tests</li> <li>Latest Changes - Release notes automation</li> </ul>"},{"location":"workflows/documentation/","title":"Documentation","text":""},{"location":"workflows/documentation/#documentation-deployment","title":"Documentation Deployment","text":"<p>This project uses MkDocs Material with mike for versioned documentation deployment to GitHub Pages.</p>"},{"location":"workflows/documentation/#documentation-structure","title":"Documentation Structure","text":"<pre><code>docs/\n\u251c\u2500\u2500 index.md              # Homepage\n\u251c\u2500\u2500 ci-cd.md             # CI/CD documentation\n\u251c\u2500\u2500 release-notes.md     # Release notes\n\u251c\u2500\u2500 contributing.md      # Contributing guide\n\u251c\u2500\u2500 code_of_conduct.md   # Code of conduct\n\u251c\u2500\u2500 license.md           # License\n\u251c\u2500\u2500 privacy.md           # Privacy policy\n\u251c\u2500\u2500 assets/              # Images and static files\n\u251c\u2500\u2500 js/                  # JavaScript files\n\u2514\u2500\u2500 stylesheets/         # CSS files\n</code></pre>"},{"location":"workflows/documentation/#automatic-deployment","title":"Automatic Deployment","text":"<p>Documentation is automatically deployed to GitHub Pages in these scenarios:</p>"},{"location":"workflows/documentation/#1-development-docs-latest","title":"1. Development Docs (Latest)","text":"<ul> <li>Trigger: Push to <code>main</code> or <code>master</code> branch</li> <li>Version: <code>dev</code> and <code>latest</code></li> <li>URL: <code>https://yourusername.github.io/elims2/latest/</code></li> <li>Automatically updates with every commit to main</li> </ul>"},{"location":"workflows/documentation/#2-release-docs-stable","title":"2. Release Docs (Stable)","text":"<ul> <li>Trigger: Publishing a GitHub Release</li> <li>Version: Release tag (e.g., <code>v1.0.0</code>) and <code>stable</code></li> <li>URL: <code>https://yourusername.github.io/elims2/stable/</code></li> <li>Creates a permanent versioned copy</li> </ul>"},{"location":"workflows/documentation/#3-manual-deployment","title":"3. Manual Deployment","text":"<ul> <li>Trigger: Manually run workflow</li> <li>Version: <code>dev</code></li> <li>Use when you need to force a rebuild</li> </ul>"},{"location":"workflows/documentation/#version-management","title":"Version Management","text":""},{"location":"workflows/documentation/#available-versions","title":"Available Versions","text":"<p>The documentation is versioned as follows:</p> <ul> <li><code>latest</code> - Latest development version from main branch</li> <li><code>stable</code> - Latest stable release</li> <li><code>v1.0.0</code>, <code>v1.1.0</code>, etc. - Specific release versions</li> </ul>"},{"location":"workflows/documentation/#version-selector","title":"Version Selector","text":"<p>Users can switch between versions using the version selector in the documentation header.</p>"},{"location":"workflows/documentation/#local-development","title":"Local Development","text":""},{"location":"workflows/documentation/#prerequisites","title":"Prerequisites","text":"<p>Install MkDocs and required plugins:</p> <pre><code># Using uv (recommended)\nuv tool install mkdocs-material\nuv tool install mike\nuv tool install mkdocs-minify-plugin\nuv tool install mkdocs-glightbox\nuv tool install mkdocstrings[python]\n\n# Or using pip\npip install mkdocs-material mike mkdocs-minify-plugin mkdocs-glightbox mkdocstrings[python]\n</code></pre>"},{"location":"workflows/documentation/#serve-locally","title":"Serve Locally","text":"<p>Start a local development server:</p> <pre><code>mkdocs serve\n</code></pre> <p>Visit: http://localhost:8000</p> <p>The server auto-reloads when you save changes.</p>"},{"location":"workflows/documentation/#build-locally","title":"Build Locally","text":"<p>Build the static site:</p> <pre><code>mkdocs build\n</code></pre> <p>Output goes to <code>site/</code> directory.</p>"},{"location":"workflows/documentation/#manual-version-management","title":"Manual Version Management","text":""},{"location":"workflows/documentation/#deploy-a-new-version","title":"Deploy a New Version","text":"<pre><code># Deploy a specific version\nmike deploy v1.0.0\n\n# Deploy and set as default\nmike deploy v1.0.0 stable --update-aliases --push\n\n# Deploy development version\nmike deploy dev latest --update-aliases --push\n</code></pre>"},{"location":"workflows/documentation/#list-all-versions","title":"List All Versions","text":"<pre><code>mike list\n</code></pre>"},{"location":"workflows/documentation/#delete-a-version","title":"Delete a Version","text":"<pre><code>mike delete v0.9.0 --push\n</code></pre>"},{"location":"workflows/documentation/#set-default-version","title":"Set Default Version","text":"<pre><code>mike set-default stable --push\n</code></pre>"},{"location":"workflows/documentation/#writing-documentation","title":"\ud83d\udcdd Writing Documentation","text":""},{"location":"workflows/documentation/#adding-new-pages","title":"Adding New Pages","text":"<ol> <li>Create a new <code>.md</code> file in <code>docs/</code></li> <li>Add it to <code>nav</code> section in <code>mkdocs.yml</code>:</li> </ol> <pre><code>nav:\n  - Home: index.md\n  - Your New Page: your-page.md\n</code></pre>"},{"location":"workflows/documentation/#markdown-features","title":"Markdown Features","text":"<p>The documentation supports:</p> <ul> <li>Admonitions (notes, warnings, tips)</li> <li>Code blocks with syntax highlighting</li> <li>Mermaid diagrams</li> <li>Plotly charts</li> <li>Math equations (KaTeX)</li> <li>Tabbed content</li> <li>Task lists</li> <li>Emoji \ud83c\udf89</li> <li>Tables</li> <li>Footnotes</li> </ul>"},{"location":"workflows/documentation/#code-documentation","title":"Code Documentation","text":"<p>Use <code>mkdocstrings</code> to auto-generate API docs from docstrings:</p> <pre><code>::: module.path.ClassName\n    options:\n      show_source: true\n      show_root_heading: true\n</code></pre>"},{"location":"workflows/documentation/#admonitions-example","title":"Admonitions Example","text":"<pre><code>!!! note \"Note Title\"\n    This is a note\n\n!!! warning\n    This is a warning\n\n!!! tip\n    This is a tip\n\n!!! danger\n    This is dangerous\n</code></pre>"},{"location":"workflows/documentation/#mermaid-diagrams","title":"Mermaid Diagrams","text":"<pre><code>```mermaid\ngraph LR\n    A[Start] --&gt; B[Process]\n    B --&gt; C[End]\n```\n</code></pre>"},{"location":"workflows/documentation/#customization","title":"\ud83c\udfa8 Customization","text":""},{"location":"workflows/documentation/#theme-configuration","title":"Theme Configuration","text":"<p>Edit <code>mkdocs.yml</code> to customize:</p> <ul> <li>Colors and fonts</li> <li>Navigation structure</li> <li>Features (search, tabs, etc.)</li> <li>Logo and favicon</li> <li>Social links</li> </ul>"},{"location":"workflows/documentation/#custom-css","title":"Custom CSS","text":"<p>Add styles to <code>docs/stylesheets/extra.css</code></p>"},{"location":"workflows/documentation/#custom-javascript","title":"Custom JavaScript","text":"<p>Add scripts to <code>docs/js/</code></p>"},{"location":"workflows/documentation/#required-github-settings","title":"\ud83d\udd10 Required GitHub Settings","text":""},{"location":"workflows/documentation/#enable-github-pages","title":"Enable GitHub Pages","text":"<ol> <li>Go to repository Settings &gt; Pages</li> <li>Source: Deploy from a branch</li> <li>Branch: gh-pages / root</li> <li>Click Save</li> </ol>"},{"location":"workflows/documentation/#workflow-permissions","title":"Workflow Permissions","text":"<ol> <li>Go to Settings &gt; Actions &gt; General</li> <li>Workflow permissions: Read and write permissions</li> <li>Check Allow GitHub Actions to create and approve pull requests</li> <li>Click Save</li> </ol>"},{"location":"workflows/documentation/#release-workflow","title":"\ud83c\udff7\ufe0f Release Workflow","text":"<p>When you publish a new release:</p> <ol> <li>Create a tag:</li> </ol> <pre><code>git tag -a v1.0.0 -m \"Release v1.0.0\"\ngit push origin v1.0.0\n</code></pre> <ol> <li> <p>Publish the release on GitHub</p> </li> <li> <p>Documentation is auto-deployed with:</p> </li> <li> <p>Version: <code>v1.0.0</code></p> </li> <li>Alias: <code>stable</code></li> <li>Appears in version selector</li> </ol>"},{"location":"workflows/documentation/#documentation-status","title":"\ud83d\udcca Documentation Status","text":"<p>Add this badge to your README:</p> <pre><code>[![Documentation](https://img.shields.io/badge/docs-stable-blue.svg)](https://yourusername.github.io/elims2/)\n</code></pre>"},{"location":"workflows/documentation/#troubleshooting","title":"\ud83d\udc1b Troubleshooting","text":""},{"location":"workflows/documentation/#build-fails","title":"Build Fails","text":"<p>Check Python version:</p> <pre><code>python --version  # Should be 3.13+\n</code></pre> <p>Reinstall dependencies:</p> <pre><code>uv tool install --force mkdocs-material\n</code></pre>"},{"location":"workflows/documentation/#versions-not-showing","title":"Versions Not Showing","text":"<p>Check gh-pages branch:</p> <pre><code>git fetch origin\ngit branch -r | grep gh-pages\n</code></pre> <p>Manually list versions:</p> <pre><code>git checkout gh-pages\nmike list\n</code></pre>"},{"location":"workflows/documentation/#local-server-issues","title":"Local Server Issues","text":"<p>Clear cache:</p> <pre><code>rm -rf site/\nmkdocs serve --clean\n</code></pre>"},{"location":"workflows/documentation/#permission-errors","title":"Permission Errors","text":"<p>Ensure workflow has write permissions in repository settings.</p>"},{"location":"workflows/documentation/#resources","title":"\ud83d\udcda Resources","text":"<ul> <li>MkDocs Documentation</li> <li>Material for MkDocs</li> <li>Mike Documentation</li> <li>MkDocs Plugins</li> <li>Markdown Guide</li> </ul>"},{"location":"workflows/documentation/#tips","title":"\ud83d\udca1 Tips","text":"<ol> <li>Preview before pushing: Always check locally with <code>mkdocs serve</code></li> <li>Use branches: Create feature branches for large doc changes</li> <li>Keep it simple: Write clear, concise documentation</li> <li>Add examples: Code examples help users understand</li> <li>Update regularly: Keep docs in sync with code changes</li> <li>Use admonitions: Highlight important information</li> <li>Link internally: Use relative links between pages</li> <li>Version wisely: Only create new versions for significant releases</li> </ol>"},{"location":"workflows/test-backend/","title":"Backend Tests","text":""},{"location":"workflows/test-backend/#backend-testing-workflow","title":"Backend Testing Workflow","text":""},{"location":"workflows/test-backend/#overview","title":"Overview","text":"<p>The backend testing workflow (<code>test-backend.yml</code>) runs automated tests for the FastAPI backend application. It performs linting, type checking, and unit tests with coverage reporting.</p>"},{"location":"workflows/test-backend/#trigger-events","title":"Trigger Events","text":"<p>This workflow runs on:</p> <ul> <li>Push to <code>main</code> or <code>master</code> branches</li> <li>Pull Request events (opened, synchronized)</li> </ul>"},{"location":"workflows/test-backend/#jobs","title":"Jobs","text":""},{"location":"workflows/test-backend/#test-job","title":"Test Job","text":"<p>Runner: <code>ubuntu-latest</code> Timeout: 15 minutes</p>"},{"location":"workflows/test-backend/#steps","title":"Steps","text":"<ol> <li> <p>Checkout Code</p> </li> <li> <p>Uses: <code>actions/checkout@v6</code></p> </li> <li> <p>Checks out the repository code</p> </li> <li> <p>Set up Python</p> </li> <li> <p>Uses: <code>actions/setup-python@v6</code></p> </li> <li>Python version: <code>3.13</code></li> <li> <p>Installs the required Python version</p> </li> <li> <p>Install uv</p> </li> <li> <p>Uses: <code>astral-sh/setup-uv@v7</code></p> </li> <li>Enables caching for faster subsequent runs</li> <li> <p>Installs the <code>uv</code> package manager</p> </li> <li> <p>Install Dependencies</p> </li> <li> <p>Working directory: <code>./backend</code></p> </li> <li>Command: <code>uv sync</code></li> <li> <p>Installs all backend dependencies from pyproject.toml</p> </li> <li> <p>Lint</p> </li> <li> <p>Working directory: <code>./backend</code></p> </li> <li> <p>Runs three linting tools:</p> <ul> <li><code>mypy</code>: Type checking for the <code>app</code> directory</li> <li><code>ruff check</code>: Linting with Ruff</li> <li><code>ruff format --check</code>: Checks code formatting</li> </ul> </li> <li> <p>Run Tests</p> </li> <li> <p>Working directory: <code>./backend</code></p> </li> <li>Commands:      <pre><code>uv run coverage run -m pytest tests/\nuv run coverage report\nuv run coverage html --title \"Backend Coverage\"\n</code></pre></li> <li>Runs pytest with coverage tracking</li> <li> <p>Generates HTML coverage report</p> </li> <li> <p>Store Coverage Files</p> </li> <li> <p>Uses: <code>actions/upload-artifact@v6</code></p> </li> <li>Uploads the <code>htmlcov</code> directory as an artifact</li> <li>Artifact name: <code>coverage-html</code></li> </ol>"},{"location":"workflows/test-backend/#coverage-job","title":"Coverage Job","text":"<p>Runs: After test job completes (always runs, even if tests fail)</p>"},{"location":"workflows/test-backend/#steps_1","title":"Steps","text":"<ol> <li> <p>Checkout Code</p> </li> <li> <p>Uses: <code>actions/checkout@v6</code></p> </li> <li> <p>Download Artifact</p> </li> <li> <p>Uses: <code>actions/download-artifact@v7</code></p> </li> <li> <p>Downloads the coverage HTML artifact</p> </li> <li> <p>Smokeshow</p> </li> <li> <p>Uses: <code>samuelcolvin/smokeshow-action@v1</code></p> </li> <li>Only runs if coverage files exist</li> <li>Publishes coverage report to Smokeshow</li> </ol>"},{"location":"workflows/test-backend/#environment-variables","title":"Environment Variables","text":"<p>No special environment variables required. The workflow uses the default Python and test environment.</p>"},{"location":"workflows/test-backend/#secrets","title":"Secrets","text":"<p>No secrets required for this workflow.</p>"},{"location":"workflows/test-backend/#configuration","title":"Configuration","text":""},{"location":"workflows/test-backend/#python-version","title":"Python Version","text":"<p>Currently configured for Python 3.13. Update the version in the workflow file:</p> <pre><code>- name: Set up Python\n  uses: actions/setup-python@v6\n  with:\n    python-version: \"3.13\"\n</code></pre>"},{"location":"workflows/test-backend/#timeout","title":"Timeout","text":"<p>The test job has a 15-minute timeout. Adjust if needed:</p> <pre><code>jobs:\n  test:\n    timeout-minutes: 15\n</code></pre>"},{"location":"workflows/test-backend/#coverage-reporting","title":"Coverage Reporting","text":"<p>Coverage reports are generated in two formats:</p> <ol> <li>Console Output: Shows coverage percentage in workflow logs</li> <li>HTML Report: Detailed HTML coverage report uploaded as artifact and to Smokeshow</li> </ol> <p>Access coverage reports:</p> <ul> <li>GitHub Actions: Download <code>coverage-html</code> artifact from workflow run</li> <li>Smokeshow: Check workflow logs for Smokeshow URL</li> </ul>"},{"location":"workflows/test-backend/#troubleshooting","title":"Troubleshooting","text":""},{"location":"workflows/test-backend/#tests-failing","title":"Tests Failing","text":"<ol> <li>Check the test logs in the workflow run</li> <li>Ensure all tests pass locally: <code>uv run pytest tests/</code></li> <li>Verify dependencies are up to date: <code>uv sync</code></li> </ol>"},{"location":"workflows/test-backend/#linting-errors","title":"Linting Errors","text":"<ol> <li>Run linting locally:    <pre><code>uv run mypy app\nuv run ruff check app\nuv run ruff format app --check\n</code></pre></li> <li>Fix any issues reported</li> <li>Auto-fix formatting: <code>uv run ruff format app</code></li> </ol>"},{"location":"workflows/test-backend/#coverage-issues","title":"Coverage Issues","text":"<ol> <li>Ensure pytest-cov is installed</li> <li>Check that tests are in the <code>tests/</code> directory</li> <li>Verify test discovery: <code>uv run pytest --collect-only</code></li> </ol>"},{"location":"workflows/test-backend/#best-practices","title":"Best Practices","text":"<ol> <li>Write Tests: Maintain high test coverage (aim for &gt;80%)</li> <li>Type Hints: Use type hints for better mypy analysis</li> <li>Format Code: Run <code>ruff format</code> before committing</li> <li>Fix Warnings: Address linting warnings promptly</li> <li>Review Coverage: Check coverage reports after changes</li> </ol>"},{"location":"workflows/test-backend/#related-workflows","title":"Related Workflows","text":"<ul> <li>Lint Backend - Additional linting checks</li> <li>Pre-commit - Pre-commit hook validation</li> <li>Test Docker Compose - Full stack integration tests</li> </ul>"},{"location":"workflows/test-frontend/","title":"Frontend Tests","text":""},{"location":"workflows/test-frontend/#frontend-testing-workflow-playwright","title":"Frontend Testing Workflow (Playwright)","text":""},{"location":"workflows/test-frontend/#overview","title":"Overview","text":"<p>The frontend testing workflow (<code>test-frontend.yml</code>) runs end-to-end tests using Playwright. It sets up a complete test environment with MariaDB and Redis services, starts the backend API, and runs Playwright tests in parallel using sharding.</p>"},{"location":"workflows/test-frontend/#trigger-events","title":"Trigger Events","text":"<p>This workflow runs on:</p> <ul> <li>Push to <code>main</code> or <code>master</code> branches</li> <li>Pull Request events (opened, synchronized)</li> </ul>"},{"location":"workflows/test-frontend/#jobs","title":"Jobs","text":""},{"location":"workflows/test-frontend/#test-job","title":"Test Job","text":"<p>Runner: <code>ubuntu-latest</code> Timeout: 30 minutes Strategy: Matrix with sharding (4 parallel runners)</p>"},{"location":"workflows/test-frontend/#matrix-configuration","title":"Matrix Configuration","text":"<pre><code>strategy:\n  fail-fast: false\n  matrix:\n    shardIndex: [1, 2, 3, 4]\n    shardTotal: [4]\n</code></pre> <p>This configuration runs tests in 4 parallel shards for faster execution.</p>"},{"location":"workflows/test-frontend/#services","title":"Services","text":"<p>Two services are configured to run alongside the test job:</p>"},{"location":"workflows/test-frontend/#mariadb-service","title":"MariaDB Service","text":"<ul> <li>Image: <code>mariadb:11</code></li> <li>Port: 3306</li> <li>Environment Variables:</li> <li><code>MARIADB_ROOT_PASSWORD</code>: Root password (from secrets or default)</li> <li><code>MARIADB_DATABASE</code>: Database name (default: <code>elims_test</code>)</li> <li><code>MARIADB_USER</code>: Database user (default: <code>elims</code>)</li> <li><code>MARIADB_PASSWORD</code>: User password (from secrets or default)</li> <li>Health Check: Checks that database is initialized and ready</li> </ul>"},{"location":"workflows/test-frontend/#redis-service","title":"Redis Service","text":"<ul> <li>Image: <code>redis:7-alpine</code></li> <li>Port: 6379</li> <li>Health Check: Uses <code>redis-cli ping</code></li> </ul>"},{"location":"workflows/test-frontend/#steps","title":"Steps","text":"<ol> <li> <p>Checkout Code</p> </li> <li> <p>Uses: <code>actions/checkout@v6</code></p> </li> <li> <p>Set up Python</p> </li> <li> <p>Uses: <code>actions/setup-python@v6</code></p> </li> <li>Python version: <code>3.13</code></li> <li> <p>Required for running the backend API</p> </li> <li> <p>Install uv</p> </li> <li> <p>Uses: <code>astral-sh/setup-uv@v7</code></p> </li> <li> <p>Installs the <code>uv</code> package manager</p> </li> <li> <p>Install Backend Dependencies</p> </li> <li> <p>Working directory: <code>./backend</code></p> </li> <li> <p>Command: <code>uv sync</code></p> </li> <li> <p>Install Bun</p> </li> <li> <p>Uses: <code>oven-sh/setup-bun@v2</code></p> </li> <li> <p>Installs the Bun JavaScript runtime</p> </li> <li> <p>Install Frontend Dependencies</p> </li> <li> <p>Working directory: <code>./frontend</code></p> </li> <li> <p>Command: <code>bun install</code></p> </li> <li> <p>Install Playwright Browsers</p> </li> <li> <p>Working directory: <code>./frontend</code></p> </li> <li>Command: <code>bunx playwright install chromium --with-deps</code></li> <li> <p>Installs Chromium browser for testing</p> </li> <li> <p>Start Backend Server</p> </li> <li> <p>Working directory: <code>./backend</code></p> </li> <li>Command: <code>uv run fastapi dev app/main.py &amp;</code></li> <li>Runs the backend API in the background</li> <li>Waits 5 seconds for startup</li> <li> <p>Environment Variables:</p> <ul> <li><code>MARIADB_HOST</code>: localhost</li> <li><code>MARIADB_PORT</code>: 3306</li> <li><code>MARIADB_USER</code>: From secrets or default</li> <li><code>MARIADB_PASSWORD</code>: From secrets or default</li> <li><code>MARIADB_DATABASE</code>: elims_test</li> <li><code>REDIS_HOST</code>: localhost</li> <li><code>REDIS_PORT</code>: 6379</li> <li><code>REDIS_PASSWORD</code>: From secrets or default</li> </ul> </li> <li> <p>Run Playwright Tests</p> </li> <li> <p>Working directory: <code>./frontend</code></p> </li> <li>Command: <code>bunx playwright test --shard=${{ matrix.shardIndex }}/${{ matrix.shardTotal }}</code></li> <li>Runs tests for the current shard</li> <li> <p>Environment Variables:</p> <ul> <li><code>VITE_API_URL</code>: http://localhost:8000</li> <li><code>CI</code>: true</li> </ul> </li> <li> <p>Upload Blob Report</p> </li> <li> <p>Uses: <code>actions/upload-artifact@v6</code></p> </li> <li>Uploads test reports as artifacts</li> <li> <p>Runs even if tests fail (<code>if: always()</code>)</p> </li> <li> <p>Upload Playwright Report (if tests fail)</p> </li> <li> <p>Uploads full Playwright HTML report</p> </li> <li>Only runs if tests failed</li> </ol>"},{"location":"workflows/test-frontend/#merge-reports-job","title":"Merge Reports Job","text":"<p>Runs: After all test jobs complete Condition: Always runs, even if tests fail</p> <p>This job merges test reports from all shards into a single report.</p>"},{"location":"workflows/test-frontend/#steps_1","title":"Steps","text":"<ol> <li> <p>Download Blob Reports</p> </li> <li> <p>Downloads all blob report artifacts</p> </li> <li> <p>Merge Reports</p> </li> <li> <p>Merges all shard reports into one</p> </li> <li> <p>Generates HTML report</p> </li> <li> <p>Upload HTML Report</p> </li> <li> <p>Uploads merged report as artifact</p> </li> </ol>"},{"location":"workflows/test-frontend/#environment-variables","title":"Environment Variables","text":""},{"location":"workflows/test-frontend/#required-during-test-execution","title":"Required During Test Execution","text":"<ul> <li><code>MARIADB_HOST</code>: localhost</li> <li><code>MARIADB_PORT</code>: 3306</li> <li><code>MARIADB_USER</code>: Database user</li> <li><code>MARIADB_PASSWORD</code>: Database password</li> <li><code>MARIADB_DATABASE</code>: Database name</li> <li><code>REDIS_HOST</code>: localhost</li> <li><code>REDIS_PORT</code>: 6379</li> <li><code>REDIS_PASSWORD</code>: Redis password</li> <li><code>VITE_API_URL</code>: Backend API URL</li> <li><code>CI</code>: Set to true for CI environment</li> </ul>"},{"location":"workflows/test-frontend/#secrets","title":"Secrets","text":""},{"location":"workflows/test-frontend/#optional-secrets","title":"Optional Secrets","text":"<p>If not provided, defaults are used:</p> <ul> <li><code>MARIADB_ROOT_PASSWORD</code>: MariaDB root password (default: <code>testpassword</code>)</li> <li><code>MARIADB_DATABASE</code>: Database name (default: <code>elims_test</code>)</li> <li><code>MARIADB_USER</code>: Database user (default: <code>elims</code>)</li> <li><code>MARIADB_PASSWORD</code>: User password (default: <code>testpassword</code>)</li> <li><code>REDIS_PASSWORD</code>: Redis password (default: <code>testpassword</code>)</li> </ul> <p>Configure these in: <code>Settings &gt; Secrets and variables &gt; Actions</code></p>"},{"location":"workflows/test-frontend/#test-sharding","title":"Test Sharding","text":"<p>Sharding splits tests across multiple runners for parallel execution:</p> <ul> <li>Benefits: Faster test execution, efficient resource usage</li> <li>Current Configuration: 4 shards</li> <li>Adjust Sharding: Modify the <code>shardTotal</code> value in the matrix</li> </ul> <p>Example for 8 shards:</p> <pre><code>matrix:\n  shardIndex: [1, 2, 3, 4, 5, 6, 7, 8]\n  shardTotal: [8]\n</code></pre>"},{"location":"workflows/test-frontend/#artifacts","title":"Artifacts","text":""},{"location":"workflows/test-frontend/#test-reports","title":"Test Reports","text":"<ul> <li>Blob Reports: Individual shard reports (intermediate format)</li> <li>HTML Report: Merged final report (downloadable from workflow run)</li> <li>Retention: 30 days (default GitHub Actions setting)</li> </ul> <p>Access reports:</p> <ol> <li>Go to workflow run</li> <li>Scroll to \"Artifacts\" section</li> <li>Download <code>playwright-report</code></li> </ol>"},{"location":"workflows/test-frontend/#configuration","title":"Configuration","text":""},{"location":"workflows/test-frontend/#playwright-configuration","title":"Playwright Configuration","text":"<p>Configure Playwright in <code>frontend/playwright.config.ts</code>:</p> <pre><code>export default defineConfig({\n  testDir: './tests',\n  fullyParallel: true,\n  forbidOnly: !!process.env.CI,\n  retries: process.env.CI ? 2 : 0,\n  workers: process.env.CI ? 1 : undefined,\n  reporter: 'html',\n  use: {\n    baseURL: process.env.VITE_API_URL || 'http://localhost:8000',\n    trace: 'on-first-retry',\n  },\n});\n</code></pre>"},{"location":"workflows/test-frontend/#timeout","title":"Timeout","text":"<p>Adjust workflow timeout if tests take longer:</p> <pre><code>jobs:\n  test:\n    timeout-minutes: 30  # Increase if needed\n</code></pre>"},{"location":"workflows/test-frontend/#troubleshooting","title":"Troubleshooting","text":""},{"location":"workflows/test-frontend/#tests-timing-out","title":"Tests Timing Out","text":"<ol> <li>Check backend logs for startup issues</li> <li>Verify database connection</li> <li>Increase sleep time after backend start:    <pre><code>sleep 10  # Increase from 5\n</code></pre></li> </ol>"},{"location":"workflows/test-frontend/#service-connection-issues","title":"Service Connection Issues","text":"<ol> <li>Verify service health checks are passing</li> <li>Check service logs in workflow output</li> <li>Ensure correct ports and hostnames</li> </ol>"},{"location":"workflows/test-frontend/#browser-installation-failures","title":"Browser Installation Failures","text":"<ol> <li>Check Playwright version compatibility</li> <li>Verify system dependencies:    <pre><code>bunx playwright install --with-deps chromium\n</code></pre></li> </ol>"},{"location":"workflows/test-frontend/#sharding-issues","title":"Sharding Issues","text":"<ol> <li>Ensure tests are independent (no shared state)</li> <li>Check for test dependencies or ordering</li> <li>Review shard-specific failures in artifacts</li> </ol>"},{"location":"workflows/test-frontend/#best-practices","title":"Best Practices","text":"<ol> <li>Write Independent Tests: Each test should be self-contained</li> <li>Use Page Objects: Organize selectors and actions</li> <li>Handle Timing: Use proper waits instead of sleep</li> <li>Clean Up: Reset state between tests</li> <li>Meaningful Assertions: Use descriptive assertion messages</li> <li>Test Data: Use factories or fixtures for test data</li> <li>Visual Testing: Consider screenshot comparisons for UI tests</li> </ol>"},{"location":"workflows/test-frontend/#local-development","title":"Local Development","text":"<p>Run tests locally to debug before pushing:</p> <pre><code># Start services\ndocker compose up mariadb redis -d\n\n# Start backend\ncd backend\nuv run fastapi dev app/main.py\n\n# Run tests (in another terminal)\ncd frontend\nbun run test\n\n# Run tests with UI\nbun run test --ui\n\n# Run specific test\nbun run test tests/home.spec.ts\n</code></pre>"},{"location":"workflows/test-frontend/#related-workflows","title":"Related Workflows","text":"<ul> <li>Lint Frontend - Frontend linting checks</li> <li>Test Backend - Backend unit tests</li> <li>Test Docker Compose - Full stack integration tests</li> </ul>"}]}
